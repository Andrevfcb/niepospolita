(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{136:function(e,t,a){"use strict";a.r(t);var n,r=a(1),c=a.n(r),i=a(12),s=a.n(i),o=(a(71),a(5)),u=a.n(o),l=a(7),p=a(3),d=a(10),j=(a(72),a(0)),b=function(e){return e.href?Object(j.jsx)("a",{className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),href:e.href,children:e.children}):e.to?Object(j.jsx)(d.b,{to:e.to,exact:e.exact,className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),children:e.children}):Object(j.jsx)("button",{className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"," ").concat(e.active&&"button--active"," ").concat(e.isClicked&&"button--active"),type:e.type,onClick:e.onClick,disabled:e.disabled,id:e.id||null,name:e.payment||null,value:e.id,children:e.children})},m=a(8),O=a(57),h="REQUIRE",v="MINLENGTH",f="MAXLENGTH",x="EMAIL",y=function(){return{type:h}},g=function(e){return{type:"MAX",val:e}},k=function(){return{type:x}},w=function(e,t){var a,n=!0,r=Object(O.a)(t);try{for(r.s();!(a=r.n()).done;){var c=a.value;c.type===h&&(n=n&&e.trim().length>0),c.type===v&&(n=n&&e.trim().length>=c.val),c.type===f&&(n=n&&e.trim().length<=c.val),"MIN"===c.type&&(n=n&&+e>=c.val),"MAX"===c.type&&(n=n&&+e<=c.val),c.type===x&&(n=n&&/^\S+@\S+\.\S+$/.test(e))}}catch(i){r.e(i)}finally{r.f()}return n},z=(a(78),function(e,t){switch(t.type){case"CHANGE":return Object(m.a)(Object(m.a)({},e),{},{value:t.val,isValid:!t.validators||w(t.val,t.validators)});case"TOUCH":return Object(m.a)(Object(m.a)({},e),{},{isTouched:!0});default:return e}}),I=function(e){var t=Object(r.useReducer)(z,{value:e.initialValue||"",isTouched:!1,isValid:e.initialValid||!1}),a=Object(p.a)(t,2),n=a[0],c=a[1],i=e.id,s=e.onInput,o=n.value,u=n.isValid;Object(r.useEffect)((function(){s(i,o,u)}),[i,o,u,s]);var l=function(t){c({type:"CHANGE",val:t.target.value,validators:e.validators})},d=function(){c({type:"TOUCH"})},b="input"===e.element?Object(j.jsx)("input",{id:e.id,type:e.type,min:e.min,max:e.max,placeholder:e.placeholder,onChange:l,onBlur:d,value:n.value}):"select"===e.element?Object(j.jsxs)("select",{id:e.id,name:e.name,onChange:l,onBlur:d,value:n.value,children:[Object(j.jsx)("option",{value:"",children:"Wybierz"}),e.options]}):Object(j.jsx)("textarea",{id:e.id,rows:e.rows||3,onChange:l,onBlur:d,value:n.value});return Object(j.jsxs)("div",{className:"form-control ".concat(!n.isValid&&n.isTouched&&"form-control--invalid"),children:[Object(j.jsx)("label",{htmlFor:e.id,children:e.label}),b,!n.isValid&&n.isTouched&&Object(j.jsx)("p",{style:"zipCode_start"===e.id||"zipCode_end"===e.id?{position:"absolute",left:"20%"}:{},children:e.errorText})]})},C=function(){var e=Object(r.useState)(!1),t=Object(p.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(),i=Object(p.a)(c,2),s=i[0],o=i[1],d=Object(r.useRef)([]),j=Object(r.useCallback)(function(){var e=Object(l.a)(u.a.mark((function e(t){var a,r,c,i,s,l,p=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=p.length>1&&void 0!==p[1]?p[1]:"GET",r=p.length>2&&void 0!==p[2]?p[2]:null,c=p.length>3&&void 0!==p[3]?p[3]:{},n(!0),i=new AbortController,d.current.push(i),e.prev=6,e.next=9,fetch(t,{method:a,body:r,headers:c,signal:i.signal});case 9:return s=e.sent,e.next=12,s.json();case 12:if(l=e.sent,d.current=d.current.filter((function(e){return e!==i})),s.ok){e.next=16;break}throw new Error(l.message);case 16:return n(!1),e.abrupt("return",l);case 20:throw e.prev=20,e.t0=e.catch(6),o(e.t0.message),n(!1),e.t0;case 25:case"end":return e.stop()}}),e,null,[[6,20]])})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(r.useEffect)((function(){return function(){d.current.forEach((function(e){return e.abort()}))}}),[]),{isLoading:a,error:s,sendRequest:j,clearError:function(){o(null)}}},N=(a(79),function(e){return Object(j.jsx)("div",{className:"".concat(e.asOverlay&&"loading-spinner__overlay"),children:Object(j.jsx)("div",{className:"lds-dual-ring"})})}),S=a(149),E=(a(80),function(e){return s.a.createPortal(Object(j.jsx)("div",{className:"backdrop",onClick:e.onClick}),document.getElementById("backdrop-hook"))}),T=(a(81),function(e){var t=Object(j.jsxs)("div",{className:"modal ".concat(e.className),style:e.style,children:[Object(j.jsx)("header",{className:"modal__header ".concat(e.headerClass),children:e.header}),Object(j.jsxs)("form",{onSubmit:e.onSubmit?e.onSubmit:function(e){return e.preventDefault()},children:[Object(j.jsx)("div",{className:"modal__content ".concat(e.contentClass),children:e.children}),Object(j.jsx)("footer",{className:"modal__footer ".concat(e.footerClass),children:e.footer})]})]});return s.a.createPortal(t,document.getElementById("modal-hook"))}),_=function(e){return Object(j.jsxs)(c.a.Fragment,{children:[e.show&&Object(j.jsx)(E,{onClick:e.onCancel}),Object(j.jsx)(S.a,{in:e.show,mountOnEnter:!0,unmountOnExit:!0,timeout:200,classNames:"modal",children:Object(j.jsx)(T,Object(m.a)({},e))})]})},D=function(e){return Object(j.jsx)(_,{onCancel:e.onClear,header:"An Error Occurred!",show:!!e.error,footer:Object(j.jsx)(b,{onClick:e.onClear,children:"Okay"}),children:Object(j.jsx)("p",{children:e.error})})},A=a(31),V=function(e,t){switch(t.type){case"INPUT_CHANGE":var a=!0;for(var n in e.inputs)e.inputs[n]&&(a=n===t.inputId?a&&t.isValid:a&&e.inputs[n].isValid);return Object(m.a)(Object(m.a)({},e),{},{inputs:Object(m.a)(Object(m.a)({},e.inputs),{},Object(A.a)({},t.inputId,{value:t.value,isValid:t.isValid})),isValid:a});case"SET_DATA":return{inputs:t.inputs,isValid:t.formIsValid};default:return e}},W=function(e,t){var a=Object(r.useReducer)(V,{inputs:e,isValid:t}),n=Object(p.a)(a,2),c=n[0],i=n[1];return[c,Object(r.useCallback)((function(e,t,a){i({type:"INPUT_CHANGE",value:t,isValid:a,inputId:e})}),[]),Object(r.useCallback)((function(e,t){i({type:"SET_DATA",inputs:e,formIsValid:t})}),[])]},P=(a(82),Object(r.createContext)({isLoggedIn:!1,userId:null,token:null,role:null,login:function(){},logout:function(){}})),M=function(){var e=C(),t=e.isLoading,a=e.error,n=e.sendRequest,i=e.clearError,s=Object(r.useContext)(P),o=W({email:{value:"",isValid:!1},password:{value:"",isValid:!1}},!1),m=Object(p.a)(o,2),O=m[0],h=m[1],v=function(){var e=Object(l.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,n("".concat("https://niepospolita-restauracja.herokuapp.com","/api/user/login"),"POST",JSON.stringify({email:O.inputs.email.value,password:O.inputs.password.value}),{"Content-Type":"application/json"});case 4:a=e.sent,s.login(a.userId,a.token,a.role),alert("zalogowano"),window.location.reload(),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(1);case 12:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)(c.a.Fragment,{children:[Object(j.jsx)(D,{error:a,onClear:i}),t&&Object(j.jsx)(N,{asOverlay:!0}),Object(j.jsxs)("div",{className:"admin-header",children:[Object(j.jsx)(d.b,{to:"/",children:"Wr\xf3\u0107 na stron\u0119 g\u0142\xf3wn\u0105"}),!s.isLoggedIn&&Object(j.jsxs)("form",{onSubmit:v,children:[Object(j.jsx)(I,{id:"email",element:"input",type:"email",label:"login:",onInput:h}),Object(j.jsx)(I,{id:"password",element:"input",type:"text",label:"has\u0142o:",onInput:h}),Object(j.jsx)(b,{type:"submit",disabled:!O.isValid,children:"ZALOGUJ"})]}),s.isLoggedIn&&Object(j.jsx)(b,{onClick:function(){return s.logout()},children:"Wyloguj"})]})]})},R=(a(83),function(e){var t=e.changeSection;return Object(j.jsxs)("ul",{children:[Object(j.jsx)("li",{id:"0",onClick:t,children:"Dodaj produkt"}),Object(j.jsx)("li",{id:1,onClick:t,children:"Zmie\u0144 produkt"}),Object(j.jsx)("li",{id:2,onClick:t,children:"Usu\u0144 produkt"}),Object(j.jsx)("li",{id:3,onClick:t,children:"Kategorie"}),Object(j.jsx)("li",{id:4,onClick:t,children:"Min. warto\u015b\u0107 zam\xf3wienia"}),Object(j.jsx)("li",{id:5,onClick:t,children:"Dow\xf3z"}),Object(j.jsx)("li",{id:6,onClick:t,children:"Min. warto\u015bci gratis"}),Object(j.jsx)("li",{id:7,onClick:t,children:"Kolacje degustacyjne"})]})}),Z=a(21),B=(a(84),function(e){var t=Object(r.useState)(),a=Object(p.a)(t,2),n=a[0],c=a[1],i=Object(r.useState)(),s=Object(p.a)(i,2),o=s[0],u=s[1],l=Object(r.useState)(!1),d=Object(p.a)(l,2),m=d[0],O=d[1],h=Object(r.useState)([]),v=Object(p.a)(h,2),f=v[0],x=v[1],y=Object(r.useState)([]),g=Object(p.a)(y,2),k=g[0],w=g[1],z=Object(r.useState)(null),I=Object(p.a)(z,2),C=(I[0],I[1]),N=Object(r.useRef)();Object(r.useEffect)((function(){if(!n&&e.previewUrl){console.log(e.previewUrl);var t="https://niepospolita.s3.eu-central-1.amazonaws.com/"+e.previewUrl;u(t)}else{if(!n)return;var a=new FileReader,r=f;a.onload=function(){"images"===e.id&&(r.push(a.result),x(r)),u(a.result)},a.readAsDataURL(n)}}),[n]);var S=function(t){C(t.target.id);var a=f,n=k;a.length>0&&(a.splice(t.target.id,1),n.splice(t.target.id,1),x(a),w(n),C(null));var r=m;n.length>1?(O(!0),r=!0):(O(!1),r=!1),e.onInput(e.id,n,r)},E=f.map((function(e,t){return Object(j.jsx)("div",{style:{height:"100%",width:"100%"},children:Object(j.jsx)("img",{src:e,alt:"Preview",id:t,onClick:S,style:{cursor:"pointer"}})},t)}));return Object(j.jsxs)("div",{className:"form-control",children:[Object(j.jsx)("input",{id:e.id,ref:N,style:{display:"none"},type:"file",accept:".jpg,.png,.jpeg",onChange:function(t){var a,n,r,i=m;w([].concat(Object(Z.a)(k),[t.target.files[0]])),t.target.files&&1===t.target.files.length?(a=t.target.files[0],c(a),n=[].concat(Object(Z.a)(k),[a]),O(!0),i=!0):(O(!1),i=!1),r="images"===e.id?n:a,e.onInput(e.id,r,i)}}),Object(j.jsxs)("div",{className:"image-upload ".concat(e.center&&"center"),children:[Object(j.jsxs)("div",{className:"image-upload__preview",children:["images"===e.id&&f.length>0&&E,!("images"===e.id)&&o&&Object(j.jsx)("img",{src:o,alt:"Preview"}),"images"===e.id&&!f.length>0&&Object(j.jsx)("p",{children:"Prosz\u0119 wybra\u0107 zdj\u0119cie produktu."}),!("images"===e.id)&&!o&&Object(j.jsx)("p",{children:"Prosz\u0119 wybra\u0107 zdj\u0119cie produktu."})]}),Object(j.jsx)(b,{type:"button",onClick:function(){N.current.click()},children:"PICK IMAGE"})]})]})}),L=function(){var e=Object(r.useState)([]),t=Object(p.a)(e,2),a=t[0],n=t[1],i=C(),s=i.isLoading,o=i.error,d=i.sendRequest,m=i.clearError,O=Object(r.useContext)(P),h=W({name:{value:"",isValid:!1},description:{value:"",isValid:!1},price:{value:"",isValid:!1},category:{value:"",isValid:!1},image:{value:null,isValid:!1}},!1),v=Object(p.a)(h,2),f=v[0],x=v[1];Object(r.useEffect)((function(){var e=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d("".concat("https://niepospolita-restauracja.herokuapp.com","/api/category"));case 3:t=e.sent,n(t.category),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[d]);var g=function(){var e=Object(l.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,(a=new FormData).append("name",f.inputs.name.value),a.append("description",f.inputs.description.value),a.append("price",f.inputs.price.value),a.append("category",f.inputs.category.value),a.append("image",f.inputs.image.value),e.next=10,d("".concat("https://niepospolita-restauracja.herokuapp.com","/api/items/"),"POST",a,{Authorization:"Bearer "+O.token});case 10:alert("Utworzono produkt"),window.location.reload(),e.next=16;break;case 14:e.prev=14,e.t0=e.catch(1);case 16:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),k=a.map((function(e){return Object(j.jsx)("option",{value:e.id,children:e.name})}));return Object(j.jsxs)(c.a.Fragment,{children:[Object(j.jsx)(D,{error:o,onClear:m}),s&&Object(j.jsx)(N,{asOverlay:!0}),Object(j.jsx)("h2",{children:"Dodaj danie / produkt"}),Object(j.jsxs)("form",{onSubmit:g,children:[Object(j.jsx)(I,{id:"name",element:"input",type:"text",label:"Nazwa produktu",validators:[y()],errorText:"Wprowad\u017a poprawn\u0105 nazw\u0119.",onInput:x}),Object(j.jsx)(B,{center:!0,id:"image",onInput:x,errorText:"Wprowad\u017a zdj\u0119cie produktu."}),Object(j.jsx)(I,{id:"description",element:"textarea",type:"text",label:"Opis produktu",validators:[y()],errorText:"Wprowad\u017a poprawny opis.",onInput:x}),Object(j.jsx)(I,{id:"price",element:"input",type:"number",label:"Cena",validators:[y()],errorText:"Wprowad\u017a poprawn\u0105 cen\u0119.",onInput:x}),a.length>0&&Object(j.jsx)(I,{id:"category",element:"select",name:"select",label:"Kategoria",validators:[y()],errorText:"Wprowad\u017a poprawn\u0105 kategori\u0119.",onInput:x,options:k}),Object(j.jsx)(b,{type:"submit",disabled:!f.isValid,children:"DODAJ"})]})]})},q=function(){var e=Object(r.useState)(!1),t=Object(p.a)(e,2),a=t[0],n=t[1],i=C(),s=i.isLoading,o=i.error,d=i.sendRequest,m=i.clearError,O=Object(r.useContext)(P),h=W({value:{value:"",isValid:!1}},!1),v=Object(p.a)(h,2),f=v[0],x=v[1];Object(r.useEffect)((function(){var e=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d("".concat("https://niepospolita-restauracja.herokuapp.com","/api/bonus-delivery/").concat("6183e76c434fe163aa0696ff"));case 3:t=e.sent,n(t.bonus_delivery_price),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[d]);var g=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,d("".concat("https://niepospolita-restauracja.herokuapp.com","/api/bonus-delivery/").concat("6183e76c434fe163aa0696ff"),"PATCH",JSON.stringify({value:parseInt(f.inputs.value.value)}),{Authorization:"Bearer "+O.token,"Content-Type":"application/json"});case 4:alert("Zaktualizowano warto\u015b\u0107"),window.location.reload(),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)(c.a.Fragment,{children:[Object(j.jsx)(D,{error:o,onClear:m}),s&&Object(j.jsx)(N,{asOverlay:!0}),Object(j.jsx)("h2",{children:"Zmie\u0144 minimaln\u0105 warto\u015b\u0107 darmowej op\u0142aty za dow\xf3z"}),a&&Object(j.jsxs)("form",{onSubmit:g,children:[Object(j.jsx)(I,{id:"value",element:"input",type:"number",label:"Minimalna warto\u015b\u0107 darmowej op\u0142aty za dow\xf3z (z\u0142)",validators:[y()],errorText:"Wprowad\u017a poprawn\u0105 warto\u015b\u0107.",onInput:x,initialValue:a.value}),Object(j.jsx)(b,{type:"submit",children:"ZMIE\u0143 WARTO\u015a\u0106"})]})]})},H=function(){var e=Object(r.useState)(!1),t=Object(p.a)(e,2),a=t[0],n=t[1],i=C(),s=i.isLoading,o=i.error,d=i.sendRequest,m=i.clearError,O=Object(r.useContext)(P),h=W({value:{value:"",isValid:!1}},!1),v=Object(p.a)(h,2),f=v[0],x=v[1];Object(r.useEffect)((function(){var e=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d("".concat("https://niepospolita-restauracja.herokuapp.com","/api/bonus-items/").concat("6183e735434fe163aa0696fa"));case 3:t=e.sent,n(t.bonus_items_price),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[d]);var g=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,d("".concat("https://niepospolita-restauracja.herokuapp.com","/api/bonus-items/").concat("6183e735434fe163aa0696fa"),"PATCH",JSON.stringify({value:parseInt(f.inputs.value.value)}),{Authorization:"Bearer "+O.token,"Content-Type":"application/json"});case 4:alert("Zaktualizowano warto\u015b\u0107"),window.location.reload(),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)(c.a.Fragment,{children:[Object(j.jsx)(D,{error:o,onClear:m}),s&&Object(j.jsx)(N,{asOverlay:!0}),Object(j.jsx)("h2",{children:"Zmie\u0144 minimaln\u0105 warto\u015b\u0107 produkt\xf3w gratis"}),a&&Object(j.jsxs)("form",{onSubmit:g,children:[Object(j.jsx)(I,{id:"value",element:"input",type:"number",label:"Minimalna warto\u015b\u0107 produkt\xf3w gratis (z\u0142)",validators:[y()],errorText:"Wprowad\u017a poprawn\u0105 warto\u015b\u0107.",onInput:x,initialValue:a.value}),Object(j.jsx)(b,{type:"submit",children:"ZMIE\u0143 WARTO\u015a\u0106"})]})]})},F=function(){return Object(j.jsxs)(c.a.Fragment,{children:[Object(j.jsx)("div",{style:{borderBottom:"1px solid black",borderTop:"1px solid black"},children:Object(j.jsx)(q,{})}),Object(j.jsx)("div",{style:{borderBottom:"1px solid black",borderTop:"1px solid black"},children:Object(j.jsx)(H,{})})]})},K=function(){var e=Object(r.useState)([]),t=Object(p.a)(e,2),a=t[0],n=t[1],i=Object(r.useState)(!1),s=Object(p.a)(i,2),o=s[0],d=s[1],m=C(),O=m.isLoading,h=m.error,v=m.sendRequest,f=m.clearError,x=Object(r.useContext)(P),g=W({name:{value:"",isValid:!1}},!1),k=Object(p.a)(g,2),w=k[0],z=k[1],S=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,v("".concat("https://niepospolita-restauracja.herokuapp.com","/api/category/"),"POST",JSON.stringify({name:w.inputs.name.value}),{Authorization:"Bearer "+x.token,"Content-Type":"application/json"});case 4:alert("Utworzono kategori\u0119"),window.location.reload(),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){var e=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v("".concat("https://niepospolita-restauracja.herokuapp.com","/api/category"));case 3:t=e.sent,n(t.category),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[v]);var E=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,v("".concat("https://niepospolita-restauracja.herokuapp.com","/api/category/").concat(o),"DELETE",null,{Authorization:"Bearer "+x.token});case 4:alert("Usuni\u0119to Kategori\u0119"),window.location.reload(),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),T=a.map((function(e){return Object(j.jsx)("option",{value:e._id,children:e.name})}));return Object(j.jsxs)(c.a.Fragment,{children:[Object(j.jsx)(D,{error:h,onClear:f}),O&&Object(j.jsx)(N,{asOverlay:!0}),Object(j.jsx)("h2",{children:"Dodaj kategori\u0119"}),Object(j.jsxs)("form",{onSubmit:S,children:[Object(j.jsx)(I,{id:"name",element:"input",type:"text",label:"Nazwa kategorii",validators:[y()],errorText:"Wprowad\u017a poprawn\u0105 nazw\u0119.",onInput:z}),Object(j.jsx)(b,{type:"submit",disabled:!w.isValid,children:"DODAJ"})]}),Object(j.jsx)("h2",{children:"Usu\u0144 kategori\u0119"}),a.length>0?Object(j.jsxs)("select",{name:"items",id:"items",onChange:function(e){console.log(e.target.value),d(e.target.value)},children:[Object(j.jsx)("option",{value:"",children:"wybierz kategori\u0119"}),T]}):Object(j.jsx)("p",{children:"Brak Kategorii"}),Object(j.jsx)(b,{onClick:E,disabled:!o,children:"USU\u0143"})]})},U=function(){var e=Object(r.useState)([]),t=Object(p.a)(e,2),a=t[0],n=t[1],i=Object(r.useState)(!1),s=Object(p.a)(i,2),o=s[0],d=s[1],m=C(),O=m.isLoading,h=m.error,v=m.sendRequest,f=m.clearError,x=Object(r.useContext)(P);Object(r.useEffect)((function(){var e=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v("".concat("https://niepospolita-restauracja.herokuapp.com","/api/items"));case 3:t=e.sent,n(t.items),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[v]);var y=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,v("".concat("https://niepospolita-restauracja.herokuapp.com","/api/items/").concat(o),"DELETE",null,{Authorization:"Bearer "+x.token});case 4:alert("Usuni\u0119to produkt"),window.location.reload(),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),g=a.map((function(e){return Object(j.jsx)("option",{value:e.id,children:e.name})}));return Object(j.jsxs)(c.a.Fragment,{children:[Object(j.jsx)(D,{error:h,onClear:f}),O&&Object(j.jsx)(N,{asOverlay:!0}),Object(j.jsx)("h2",{children:"Usu\u0144"}),a.length>0?Object(j.jsxs)("select",{name:"items",id:"items",onChange:function(e){d(e.target.value)},children:[Object(j.jsx)("option",{value:"",children:"wybierz produkt"}),g]}):Object(j.jsx)("p",{children:"Brak produkt\xf3w"}),Object(j.jsx)(b,{onClick:y,disabled:!o,children:"USU\u0143"})]})},J=function(){var e=Object(r.useState)(!1),t=Object(p.a)(e,2),a=t[0],n=t[1],i=C(),s=i.isLoading,o=i.error,d=i.sendRequest,m=i.clearError,O=Object(r.useContext)(P),h=W({value:{value:"",isValid:!1}},!1),v=Object(p.a)(h,2),f=v[0],x=v[1];Object(r.useEffect)((function(){var e=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d("".concat("https://niepospolita-restauracja.herokuapp.com","/api/delivery/").concat("617bc3415add00f3c5d37619"));case 3:t=e.sent,n(t.delivery_price),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[d]);var g=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,d("".concat("https://niepospolita-restauracja.herokuapp.com","/api/delivery/").concat("617bc3415add00f3c5d37619"),"PATCH",JSON.stringify({value:parseInt(f.inputs.value.value)}),{Authorization:"Bearer "+O.token,"Content-Type":"application/json"});case 4:alert("Zaktualizowano warto\u015b\u0107"),window.location.reload(),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)(c.a.Fragment,{children:[Object(j.jsx)(D,{error:o,onClear:m}),s&&Object(j.jsx)(N,{asOverlay:!0}),Object(j.jsx)("h2",{children:"Zmie\u0144 warto\u015b\u0107 op\u0142aty za dow\xf3z"}),a&&Object(j.jsxs)("form",{onSubmit:g,children:[Object(j.jsx)(I,{id:"value",element:"input",type:"number",label:"Minimalna warto\u015b\u0107 op\u0142aty za dow\xf3z (z\u0142)",validators:[y()],errorText:"Wprowad\u017a poprawn\u0105 warto\u015b\u0107.",onInput:x,initialValue:a.value}),Object(j.jsx)(b,{type:"submit",children:"ZMIE\u0143 WARTO\u015a\u0106"})]})]})},G=function(){var e=Object(r.useState)(!1),t=Object(p.a)(e,2),a=t[0],n=t[1],i=C(),s=i.isLoading,o=i.error,d=i.sendRequest,m=i.clearError,O=Object(r.useContext)(P),h=W({deliveryTime:{value:"",isValid:!1}},!1),v=Object(p.a)(h,2),f=v[0],x=v[1];Object(r.useEffect)((function(){var e=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d("".concat("https://niepospolita-restauracja.herokuapp.com","/api/deliverytime/").concat("6183c6c50e63c1ac6af40a7e"));case 3:t=e.sent,n(t.deliveryTime.time),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[d]);var g=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,d("".concat("https://niepospolita-restauracja.herokuapp.com","/api/deliverytime/").concat("6183c6c50e63c1ac6af40a7e"),"PATCH",JSON.stringify({time:parseInt(f.inputs.deliveryTime.value)}),{Authorization:"Bearer "+O.token,"Content-Type":"application/json"});case 4:alert("Zaktualizowano warto\u015b\u0107"),window.location.reload(),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)(c.a.Fragment,{children:[Object(j.jsx)(D,{error:o,onClear:m}),s&&Object(j.jsx)(N,{asOverlay:!0}),Object(j.jsx)("h2",{children:"Zmie\u0144 czas dowozu"}),a&&Object(j.jsxs)("form",{onSubmit:g,children:[Object(j.jsx)(I,{id:"deliveryTime",element:"input",type:"number",label:"Czas dowozu (min)",validators:[y()],errorText:"Wprowad\u017a poprawn\u0105 warto\u015b\u0107.",onInput:x,initialValue:a}),Object(j.jsx)(b,{type:"submit",children:"ZMIE\u0143 CZAS"})]})]})},Y=function(){var e=Object(r.useState)([]),t=Object(p.a)(e,2),a=t[0],n=t[1],i=Object(r.useState)(!1),s=Object(p.a)(i,2),o=s[0],d=s[1],m=Object(r.useState)(),O=Object(p.a)(m,2),h=O[0],v=O[1],f=C(),x=f.isLoading,g=f.error,k=f.sendRequest,w=f.clearError,z=Object(r.useContext)(P),S=W({startHour:{value:"",isValid:!1},startMinute:{value:"",isValid:!1},endHour:{value:"",isValid:!1},endMinute:{value:"",isValid:!1}},!1),E=Object(p.a)(S,2),T=E[0],_=E[1],A=W({day:{value:"",isValid:!1}},!1),V=Object(p.a)(A,2),M=V[0],R=V[1];Object(r.useEffect)((function(){var e=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k("".concat("https://niepospolita-restauracja.herokuapp.com","/api/time"));case 3:t=e.sent,n(t.time),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[k]),Object(r.useEffect)((function(){var e=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!M.inputs.day.value){e.next=13;break}return e.prev=1,e.next=4,k("".concat("https://niepospolita-restauracja.herokuapp.com","/api/time/").concat(M.inputs.day.value));case 4:t=e.sent,d(t.time),v(t.time.available),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:e.next=14;break;case 13:return e.abrupt("return");case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();e()}),[k,M.inputs.day.value]);var Z=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,k("".concat("https://niepospolita-restauracja.herokuapp.com","/api/time/").concat(M.inputs.day.value),"PATCH",JSON.stringify({startHour:parseInt(T.inputs.startHour.value),startMinute:parseInt(T.inputs.startMinute.value),endHour:parseInt(T.inputs.endHour.value),endMinute:parseInt(T.inputs.endMinute.value),available:h}),{Authorization:"Bearer "+z.token,"Content-Type":"application/json"});case 4:alert("Zaktualizowano Godziny"),window.location.reload(),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),B=a.map((function(e){return Object(j.jsx)("option",{value:e._id,children:e.day})}));return Object(j.jsxs)(c.a.Fragment,{children:[Object(j.jsx)(D,{error:g,onClear:w}),x&&Object(j.jsx)(N,{asOverlay:!0}),Object(j.jsx)("h2",{children:"Zmie\u0144 godziny dowozu"}),a.length>0&&Object(j.jsx)(I,{id:"day",element:"select",name:"select",label:"Wybierz dzie\u0144",validators:[y()],errorText:"Wybierz poprawny dzie\u0144.",onInput:R,options:B}),o&&Object(j.jsxs)("form",{onSubmit:Z,children:[Object(j.jsxs)("div",{className:"start",children:[Object(j.jsx)("span",{children:"Start: "}),Object(j.jsx)(I,{id:"startHour",element:"input",type:"number",min:0,max:23,validators:[y()],onInput:_,initialValue:o.time.start.hour}),":",Object(j.jsx)(I,{id:"startMinute",element:"input",type:"number",min:0,max:59,validators:[y()],onInput:_,initialValue:o.time.start.minute})]}),Object(j.jsxs)("div",{className:"end",children:[Object(j.jsx)("span",{children:"Koniec: "}),Object(j.jsx)(I,{id:"endHour",element:"input",type:"number",min:0,max:23,validators:[y()],onInput:_,initialValue:o.time.end.hour}),":",Object(j.jsx)(I,{id:"endMinute",element:"input",type:"number",min:0,max:59,validators:[y()],onInput:_,initialValue:o.time.end.minute}),Object(j.jsxs)("div",{className:"availability",style:{marginTop:"1em"},children:[Object(j.jsx)("label",{for:"availability",style:{fontWeight:"bold",marginBottom:"0.5rem"},children:"Dow\xf3z aktywny?"}),Object(j.jsx)("input",{id:"availability",type:"checkbox",onChange:function(){v((function(e){return!e}))},checked:h,style:{display:"block",margin:"auto"}})]})]}),Object(j.jsx)(b,{type:"submit",children:"ZMIE\u0143 GODZINY"})]})]})},X=function(){return Object(j.jsxs)(c.a.Fragment,{children:[Object(j.jsx)("div",{style:{borderBottom:"1px solid black",borderTop:"1px solid black"},children:Object(j.jsx)(Y,{})}),Object(j.jsx)("div",{style:{borderBottom:"1px solid black",borderTop:"1px solid black"},children:Object(j.jsx)(G,{})}),Object(j.jsx)("div",{style:{borderBottom:"1px solid black",borderTop:"1px solid black"},children:Object(j.jsx)(J,{})})]})},Q=function(){var e=C(),t=e.isLoading,a=e.error,n=e.sendRequest,i=e.clearError,s=Object(r.useContext)(P),o=Object(r.useState)([]),d=Object(p.a)(o,2),O=d[0],h=d[1],v=Object(r.useState)(!1),f=Object(p.a)(v,2),x=f[0],g=f[1],k=Object(r.useState)([]),w=Object(p.a)(k,2),z=w[0],S=w[1],E=Object(r.useState)(!1),T=Object(p.a)(E,2),A=T[0],V=T[1],M=Object(r.useState)(""),R=Object(p.a)(M,2),Z=R[0],B=R[1],L=Object(r.useState)(!1),q=Object(p.a)(L,2),H=q[0],F=q[1],K=W({name:{value:"",isValid:!1}},!1),U=Object(p.a)(K,2),J=U[0],G=U[1],Y=W({hour:{value:"",isValid:!1},guests:{value:"",isValid:!1}},!1),X=Object(p.a)(Y,2),Q=X[0],$=X[1];Object(r.useEffect)((function(){var e=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n("".concat("https://niepospolita-restauracja.herokuapp.com","/api/reservation"));case 3:t=e.sent,V(t.reservations[0].available.value),B(t.reservations[0].available.message),h(t.reservations[0].days),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();e()}),[n]),Object(r.useEffect)((function(){var e=function(){var e=Object(l.a)(u.a.mark((function e(){var t,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!J.inputs.name.value){e.next=16;break}return e.prev=1,e.next=4,n("".concat("https://niepospolita-restauracja.herokuapp.com","/api/reservation/").concat(J.inputs.name.value));case 4:t=e.sent,g(t.reservation),a=t.reservation.availableHours,r=a.sort((function(e,t){return e.hour-t.hour})),console.log(r),S(r),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(1);case 14:e.next=17;break;case 16:return e.abrupt("return");case 17:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}();e()}),[n,J.inputs.name.value]);var ee=function(e){e.preventDefault();var t=z.find((function(t){return t._id===e.target.id})),a=parseInt(e.target.value);t.guests=a;var n=Object(m.a)({},z);S(Object.values(n))},te=function(e){var t=z.find((function(t){return t._id===e.target.id})),a=z.filter((function(e){return!(e===t)}));S(Object.values(a))},ae=function(){var e=Object(l.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a={value:A,message:Z},e.prev=2,e.next=5,n("".concat("https://niepospolita-restauracja.herokuapp.com","/api/reservation/").concat(x._id),"PATCH",JSON.stringify({available:a,availableHours:z}),{Authorization:"Bearer "+s.token,"Content-Type":"application/json"});case 5:alert("Zaktualizowano produkt"),window.location.reload(),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(2);case 11:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(Q.inputs.hour.value,Q.inputs.guests.value),e.prev=2,e.next=5,n("".concat("https://niepospolita-restauracja.herokuapp.com","/api/reservation/").concat(x._id),"POST",JSON.stringify({hour:Q.inputs.hour.value,guests:Q.inputs.guests.value}),{Authorization:"Bearer "+s.token,"Content-Type":"application/json"});case 5:alert("Dodano godzin\u0119"),window.location.reload(),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(2);case 11:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),re=function(){F(!1)},ce=O.map((function(e){return Object(j.jsx)("option",{value:e._id,children:e.name})})),ie=z.map((function(e,t){return Object(j.jsx)("div",{children:Object(j.jsxs)("p",{children:[Object(j.jsxs)("span",{style:{color:"black",fontWeight:"bold"},children:["Godzina ",e.hour,":00 - "]}),Object(j.jsx)("span",{style:{color:"black",fontWeight:"bold"},children:"Liczba go\u015bci:"}),Object(j.jsx)("input",{style:{margin:"0 1em",width:"10%",textAlign:"center"},type:"number",id:e._id,value:z[t].guests,onChange:ee}),Object(j.jsx)("span",{id:e._id,class:"fas fa-times",style:{cursor:"pointer"},onClick:te})]})},t)}));return Object(j.jsxs)(c.a.Fragment,{children:[Object(j.jsx)(D,{error:a,onClear:i}),t&&Object(j.jsx)(N,{asOverlay:!0}),Object(j.jsx)(_,{show:H,onCancel:re,header:Object(j.jsx)("h2",{children:"Nowa Godzina"}),contentClass:"place-item__modal-content",footerClass:"place-item__modal-actions",footer:Object(j.jsx)(b,{onClick:re,children:"ZAMKNIJ"}),children:Object(j.jsxs)(c.a.Fragment,{children:[Object(j.jsx)(D,{error:a,onClear:i}),t&&Object(j.jsx)(N,{asOverlay:!0}),Object(j.jsxs)("form",{className:"new-hour",onSubmit:ne,children:[Object(j.jsx)(I,{id:"hour",element:"input",type:"number",label:"Godzina",validators:[y()],errorText:"Wprowad\u017a poprawn\u0105 godzin\u0119.",onInput:$}),Object(j.jsx)(I,{id:"guests",element:"input",type:"number",label:"Liczba go\u015bci",validators:[y()],errorText:"Wprowad\u017a poprawn\u0105 liczb\u0119 go\u015bci.",onInput:$}),Object(j.jsx)(b,{type:"submit",disabled:!Q.isValid,onClick:ne,children:"DODAJ"})]})]})}),Object(j.jsx)("h2",{onClick:function(){return console.log(z)},children:"Zaktualizuj liczb\u0119 go\u015bci"}),O.length>0&&Object(j.jsx)(I,{id:"name",element:"select",name:"select",label:"Wybierz dzie\u0144",validators:[y()],errorText:"Wybierz dzie\u0144.",onInput:G,options:ce}),x&&Object(j.jsxs)("div",{children:[ie,Object(j.jsx)(b,{onClick:function(){F(!0)},children:"Dodaj godzin\u0119"})]}),Object(j.jsxs)("form",{onSubmit:ae,children:[Object(j.jsxs)("div",{style:{borderTop:"1px solid",borderBottom:"1px solid",color:"black"},children:[Object(j.jsx)("label",{for:"available",style:{fontWeight:"bold",padding:"0.5em",display:"block"},children:"Dost\u0119pno\u015b\u0107:"}),Object(j.jsx)("input",{id:"available",type:"checkbox",onChange:function(){B(""),V((function(e){return!e}))},checked:A,style:{display:"block",margin:"0.5em auto"}}),!A&&Object(j.jsxs)("p",{children:[Object(j.jsx)("span",{children:"Wiadomo\u015b\u0107:"}),Object(j.jsx)("textarea",{onChange:function(e){B(e.target.value)},value:Z,style:{display:"block",margin:"0.5em auto"}})]})]}),Object(j.jsx)(b,{type:"submit",children:"ZAKTUALIZUJ"})]})]})},$=function(){var e=Object(r.useState)([]),t=Object(p.a)(e,2),a=t[0],n=t[1],i=Object(r.useState)([]),s=Object(p.a)(i,2),o=s[0],d=s[1],m=Object(r.useState)(!1),O=Object(p.a)(m,2),h=O[0],v=O[1],f=Object(r.useState)(),x=Object(p.a)(f,2),g=x[0],k=x[1],w=Object(r.useState)(),z=Object(p.a)(w,2),S=z[0],E=z[1],T=Object(r.useState)(),_=Object(p.a)(T,2),A=_[0],V=_[1],M=C(),R=M.isLoading,Z=M.error,B=M.sendRequest,L=M.clearError,q=Object(r.useContext)(P),H=W({name:{value:"",isValid:!1},description:{value:"",isValid:!1},price:{value:"",isValid:!1},category:{value:"",isValid:!1}},!1),F=Object(p.a)(H,2),K=F[0],U=F[1],J=W({name:{value:"",isValid:!1}},!1),G=Object(p.a)(J,2),Y=G[0],X=G[1];Object(r.useEffect)((function(){var e=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B("".concat("https://niepospolita-restauracja.herokuapp.com","/api/category"));case 3:t=e.sent,n(t.category),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B("".concat("https://niepospolita-restauracja.herokuapp.com","/api/items"));case 3:t=e.sent,d(t.items),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e(),t()}),[B]),Object(r.useEffect)((function(){var e=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Y.inputs.name.value){e.next=15;break}return e.prev=1,e.next=4,B("".concat("https://niepospolita-restauracja.herokuapp.com","/api/items/").concat(Y.inputs.name.value));case 4:t=e.sent,v(t.item),k(t.item.available),E(t.item.bonus),V(t.item.special),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(1);case 13:e.next=16;break;case 15:return e.abrupt("return");case 16:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}();e()}),[B,Y.inputs.name.value]);var Q=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,B("".concat("https://niepospolita-restauracja.herokuapp.com","/api/items/").concat(h.id),"PATCH",JSON.stringify({name:K.inputs.name.value,description:K.inputs.description.value,price:K.inputs.price.value,category:K.inputs.category.value,available:g,bonus:S,special:A}),{Authorization:"Bearer "+q.token,"Content-Type":"application/json"});case 4:alert("Zaktualizowano produkt"),window.location.reload(),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),$=a.map((function(e){return Object(j.jsx)("option",{value:e.id,children:e.name})})),ee=o.map((function(e){return Object(j.jsx)("option",{value:e.id,children:e.name})}));return Object(j.jsxs)(c.a.Fragment,{children:[Object(j.jsx)(D,{error:Z,onClear:L}),R&&Object(j.jsx)(N,{asOverlay:!0}),Object(j.jsx)("h2",{children:"Zaktualizuj danie / produkt"}),Object(j.jsx)(I,{id:"name",element:"select",name:"select",label:"Wybierz Produkt",validators:[y()],errorText:"Wybierz poprawny produkt.",onInput:X,options:ee}),h&&Object(j.jsxs)("form",{onSubmit:Q,children:[Object(j.jsx)(I,{id:"name",element:"input",type:"text",label:"Nazwa produktu",validators:[y()],errorText:"Wprowad\u017a poprawn\u0105 nazw\u0119.",onInput:U,initialValue:h.name}),Object(j.jsx)(I,{id:"description",element:"textarea",type:"text",label:"Opis produktu",validators:[y()],errorText:"Wprowad\u017a poprawny opis.",onInput:U,initialValue:h.description}),Object(j.jsx)(I,{id:"price",element:"input",type:"number",label:"Cena",validators:[y()],errorText:"Wprowad\u017a poprawn\u0105 cen\u0119.",onInput:U,initialValue:h.price}),a.length>0&&Object(j.jsx)(I,{id:"category",element:"select",name:"select",label:"Kategoria",validators:[y()],errorText:"Wprowad\u017a poprawn\u0105 kategori\u0119.",onInput:U,options:$,initialValue:h.category}),Object(j.jsx)("label",{for:"availability",style:{fontWeight:"bold",marginBottom:"0.5rem"},children:"Produkt dost\u0119pny?"}),Object(j.jsx)("input",{id:"availability",type:"checkbox",onChange:function(){k((function(e){return!e}))},checked:g,style:{display:"block",margin:"auto"}}),Object(j.jsx)("label",{for:"bonus",style:{fontWeight:"bold",marginBottom:"0.5rem"},children:"Produkt gratis?"}),Object(j.jsx)("input",{id:"bonus",type:"checkbox",onChange:function(){E((function(e){return!e}))},checked:S,style:{display:"block",margin:"auto"}}),Object(j.jsx)("label",{for:"special",style:{fontWeight:"bold",marginBottom:"0.5rem"},children:"Kolacje degustacyjne?"}),Object(j.jsx)("input",{id:"special",type:"checkbox",onChange:function(){V((function(e){return!e}))},checked:A,style:{display:"block",margin:"auto"}}),Object(j.jsx)(b,{type:"submit",children:"ZMIE\u0143"})]})]})},ee=function(){var e=Object(r.useState)(!1),t=Object(p.a)(e,2),a=t[0],n=t[1],i=C(),s=i.isLoading,o=i.error,d=i.sendRequest,m=i.clearError,O=Object(r.useContext)(P),h=W({value:{value:"",isValid:!1}},!1),v=Object(p.a)(h,2),f=v[0],x=v[1];Object(r.useEffect)((function(){var e=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d("".concat("https://niepospolita-restauracja.herokuapp.com","/api/value/").concat("61685af0e5a81699697aeb42"));case 3:t=e.sent,n(t.value),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[d]);var g=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,d("".concat("https://niepospolita-restauracja.herokuapp.com","/api/value/").concat("61685af0e5a81699697aeb42"),"PATCH",JSON.stringify({newValue:parseInt(f.inputs.value.value)}),{Authorization:"Bearer "+O.token,"Content-Type":"application/json"});case 4:alert("Zaktualizowano warto\u015b\u0107"),window.location.reload(),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)(c.a.Fragment,{children:[Object(j.jsx)(D,{error:o,onClear:m}),s&&Object(j.jsx)(N,{asOverlay:!0}),Object(j.jsx)("h2",{children:"Zmie\u0144 minimaln\u0105 warto\u015b\u0107 zam\xf3wienia"}),a&&Object(j.jsxs)("form",{onSubmit:g,children:[Object(j.jsx)(I,{id:"value",element:"input",type:"number",label:"Minimalna warto\u015b\u0107 zam\xf3wienia (z\u0142)",validators:[y()],errorText:"Wprowad\u017a poprawn\u0105 warto\u015b\u0107.",onInput:x,initialValue:a.value}),Object(j.jsx)(b,{type:"submit",children:"ZMIE\u0143 WARTO\u015a\u0106"})]})]})},te=function(){var e=Object(r.useState)("0"),t=Object(p.a)(e,2),a=t[0],n=t[1];return Object(j.jsx)(c.a.Fragment,{children:Object(j.jsxs)("div",{className:"admin",children:[Object(j.jsx)("div",{className:"admin-navigation",children:Object(j.jsx)(R,{changeSection:function(e){console.log(e.target.id),n(e.target.id)}})}),Object(j.jsxs)("div",{className:"admin-content",children:["0"===a&&Object(j.jsx)(L,{}),"1"===a&&Object(j.jsx)($,{}),"2"===a&&Object(j.jsx)(U,{}),"3"===a&&Object(j.jsx)(K,{}),"4"===a&&Object(j.jsx)(ee,{}),"5"===a&&Object(j.jsx)(X,{}),"6"===a&&Object(j.jsx)(F,{}),"7"===a&&Object(j.jsx)(Q,{})]})]})})},ae=a(9),ne=(a(85),function(){return Object(j.jsxs)("ul",{className:"nav",children:[Object(j.jsx)("li",{className:"main-navigation",children:Object(j.jsx)(d.c,{to:"/",exact:!0,children:"Zam\xf3w"})}),Object(j.jsx)("li",{className:"main-navigation",children:Object(j.jsx)(d.c,{to:"/koszyk",exact:!0,children:Object(j.jsx)("span",{class:"fas fa-shopping-cart"})})})]})}),re=(a(86),function(e){var t=Object(j.jsx)(S.a,{in:e.show,timeout:200,classNames:"slide-in-left",mountOnEnter:!0,unmountOnExit:!0,children:Object(j.jsx)("aside",{className:"side-drawer",onClick:e.onClick,children:e.children})});return s.a.createPortal(t,document.getElementById("drawer-hook"))}),ce=a.p+"static/media/logo.f284211f.png",ie=function(){var e=Object(r.useState)(!1),t=Object(p.a)(e,2),a=t[0],n=t[1],i=C(),s=i.error,o=i.clearError,u=function(){n(!1)};return Object(j.jsxs)(c.a.Fragment,{children:[Object(j.jsx)(D,{error:s,onClear:o}),a&&Object(j.jsx)(E,{onClick:u}),Object(j.jsx)(re,{show:a,onClick:u,children:Object(j.jsx)("nav",{className:"main-navigation__drawer-nav",children:Object(j.jsx)(ne,{})})}),Object(j.jsxs)("div",{className:"header",children:[Object(j.jsx)("a",{href:"https://niepospolita-lublin.com",className:"logo-link",exact:!0,children:Object(j.jsxs)("div",{className:"logo title",children:[Object(j.jsx)("img",{src:ce,alt:"logo",className:"logo"}),Object(j.jsx)("span",{children:"Niepospolita Restauracja"})]})}),Object(j.jsxs)("button",{className:"main-navigation__menu-btn",onClick:function(){n(!0)},children:[Object(j.jsx)("span",{}),Object(j.jsx)("span",{}),Object(j.jsx)("span",{})]}),Object(j.jsx)("div",{className:"navigation",children:Object(j.jsx)(ne,{})})]})]})},se=(a(87),function(){return Object(j.jsxs)("div",{className:"footer",children:[Object(j.jsx)("a",{href:"https://niepospolita-lublin.com",className:"logo-link",exact:!0,children:Object(j.jsxs)("div",{className:"footer-logo logo title",children:[Object(j.jsx)("img",{src:ce,alt:"logo",className:"logo"}),Object(j.jsx)("span",{className:"footer-title",children:"Powr\xf3t na stron\u0119 g\u0142\xf3wn\u0105"})]})}),Object(j.jsx)("div",{className:"footer-menu",children:Object(j.jsxs)("ul",{className:"nav",children:[Object(j.jsx)("li",{className:"main-navigation",children:Object(j.jsx)(d.c,{to:"/",exact:!0,children:"Zam\xf3w"})}),Object(j.jsx)("li",{className:"main-navigation",children:Object(j.jsx)(d.c,{to:"/koszyk",exact:!0,children:"Koszyk"})}),Object(j.jsx)("li",{className:"main-navigation",children:Object(j.jsx)("a",{href:"https://niepospolita-lublin.com/regulamin/",exact:!0,children:"Regulamin"})})]})})]})}),oe=(a(42),function(e){return{itemCount:e.reduce((function(e,t){return e+t.quantity}),0),total:e.reduce((function(e,t){return e+t.price*t.quantity}),0)}}),ue=function(e,t){switch(t.type){case"ADD_ITEM":return e.cartItems.find((function(e){return e.id===t.payload.id}))||e.cartItems.push(Object(m.a)(Object(m.a)({},t.payload),{},{quantity:1})),Object(m.a)(Object(m.a)({},e),{},{cartItems:Object(Z.a)(e.cartItems)},oe(e.cartItems));case"REMOVE_ITEM":var a=e.cartItems.filter((function(e){return e.id!==t.payload.id}));return Object(m.a)(Object(m.a)({},e),{},{cartItems:Object(Z.a)(a)},oe(a));case"INCREASE":var n=e.cartItems.findIndex((function(e){return e.id===t.payload.id}));return e.cartItems[n].quantity++,Object(m.a)(Object(m.a)({},e),{},{cartItems:Object(Z.a)(e.cartItems)},oe(e.cartItems));case"DECREASE":var r=e.cartItems.findIndex((function(e){return e.id===t.payload.id}));return e.cartItems[r].quantity--,Object(m.a)(Object(m.a)({},e),{},{cartItems:Object(Z.a)(e.cartItems)},oe(e.cartItems));case"ADD_BONUS_ITEM":var c={id:t.payload._id,item:t.payload.name,quantity:1,price:0};return Object(m.a)(Object(m.a)(Object(m.a)({},e),{},{cartItems:Object(Z.a)(e.cartItems)},oe(e.cartItems)),{},{bonusItem:c});default:return e}},le=Object(r.createContext)(),pe={cartItems:[],itemCount:0,total:0,bonusItem:!1},de=function(e){var t=e.children,a=Object(r.useReducer)(ue,pe),n=Object(p.a)(a,2),c=n[0],i=n[1],s=Object(m.a)(Object(m.a)({},c),{},{addProduct:function(e){return i({type:"ADD_ITEM",payload:e})},removeProduct:function(e){return i({type:"REMOVE_ITEM",payload:e})},increase:function(e){return i({type:"INCREASE",payload:e})},decrease:function(e){return i({type:"DECREASE",payload:e})},addBonusItem:function(e){return i({type:"ADD_BONUS_ITEM",payload:e})}});return Object(j.jsx)(le.Provider,{value:s,children:t})},je=function(e,t){return t.find((function(t){return t.id===e.id}))},be=function(e){var t=e.id,a=e.name,n=e.price,i=e.image,s=e.description,o={id:t,name:a,price:n,image:i,description:s},u=Object(r.useContext)(le),l=u.addProduct,p=u.cartItems,d=Object(ae.g)();return Object(j.jsx)(c.a.Fragment,{children:Object(j.jsxs)("div",{className:"item-card",children:[Object(j.jsx)("div",{className:"item-card__image",children:Object(j.jsx)("img",{src:"".concat("https://niepospolita.s3.eu-central-1.amazonaws.com","/").concat(i),alt:a})}),Object(j.jsxs)("div",{className:"item-card__info",children:[Object(j.jsxs)("p",{className:"name price",children:[Object(j.jsx)("span",{style:{fontWeight:"bold",maxWidth:"70%"},children:a}),Object(j.jsxs)("span",{style:{fontWeight:"bold",marginLeft:"0.7em"},children:[n," z\u0142"]})]}),Object(j.jsx)("p",{className:"description",children:s}),!je(o,p)&&Object(j.jsx)(b,{onClick:function(){l(o)},children:"Dodaj do koszyka"}),je(o,p)&&Object(j.jsx)(b,{active:!0,onClick:function(){d.push("/koszyk")},children:"Przejd\u017a do koszyka"})]})]})})},me=(a(88),function(e){return Object(j.jsx)("div",{className:"card ".concat(e.className),style:e.style,children:e.children})}),Oe=function(){var e=Object(r.useState)(!1),t=Object(p.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(!1),i=Object(p.a)(c,2),s=i[0],o=i[1],u=Object(r.useState)(!1),l=Object(p.a)(u,2),d=l[0],j=l[1],b=Object(r.useState)(!1),m=Object(p.a)(b,2),O=m[0],h=m[1];return Object(r.useEffect)((function(){var e=(new Date).getDay(),t=(new Date).getHours(),a=(new Date).getMinutes();switch(j(t),h(a),e){default:n("Niedziela"),o("616866d188b1a5c67bdb3547");break;case 1:n("Poniedzia\u0142ek"),o("6168665588b1a5c67bdb3539");break;case 2:n("Wtorek"),o("6168666588b1a5c67bdb353b");break;case 3:n("\u015aroda"),o("6168667c88b1a5c67bdb353d");break;case 4:n("Czwartek"),o("6168669588b1a5c67bdb3540");break;case 5:n("Pi\u0105tek"),o("616866bd88b1a5c67bdb3543");break;case 6:n("Sobota"),o("616866c888b1a5c67bdb3545")}}),[]),{today:a,dayId:s,currentHour:d,currentMinute:O}},he=function(){var e=Object(r.useState)(),t=Object(p.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(),i=Object(p.a)(c,2),s=i[0],o=i[1],d=Object(r.useState)([]),b=Object(p.a)(d,2),m=b[0],O=b[1],h=Object(r.useState)(),v=Object(p.a)(h,2),f=v[0],x=v[1],y=Object(r.useState)(!1),g=Object(p.a)(y,2),k=g[0],w=g[1],z=Object(r.useState)(!1),I=Object(p.a)(z,2),S=I[0],E=I[1],T=Object(r.useState)(!1),_=Object(p.a)(T,2),D=_[0],A=_[1],V=Object(r.useState)(!0),W=Object(p.a)(V,2),P=W[0],M=W[1],R=C(),Z=R.isLoading,B=(R.error,R.sendRequest),L=(R.clearError,Oe()),q=L.today,H=L.dayId;Object(r.useEffect)((function(){window.scrollTo(0,0);var e=function(){var e=Object(l.a)(u.a.mark((function e(){var t,a,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B("".concat("https://niepospolita-restauracja.herokuapp.com","/api/items/"));case 3:t=e.sent,a=t.items.filter((function(e){return!("INNE"===e.category)})),r=a.sort((function(e,t){return e.name>t.name?1:-1})),c=r.sort((function(e,t){var a,n;return(a="PRZYSTAWKI"===e.category?0:"ZUPY"===e.category?1:"SA\u0141ATY"===e.category?2:"DANIA G\u0141\xd3WNE"===e.category?3:"BURGERY I KANAPKI"===e.category?4:"DODATKI"===e.category?5:"DANIA DLA DZIECI"===e.category?6:"DESERY"===e.category?7:10)<(n="PRZYSTAWKI"===t.category?0:"ZUPY"===t.category?1:"SA\u0141ATY"===t.category?2:"DANIA G\u0141\xd3WNE"===t.category?3:"BURGERY I KANAPKI"===t.category?4:"DODATKI"===t.category?5:"DANIA DLA DZIECI"===t.category?6:"DESERY"===t.category?7:10)?-1:a>n?1:0})),console.log(c),n(c),o(c),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(l.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B("".concat("https://niepospolita-restauracja.herokuapp.com","/api/category/"));case 3:t=e.sent,a=t.category.filter((function(e){return!("INNE"===e.name)})),O(a),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),a=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B("".concat("https://niepospolita-restauracja.herokuapp.com","/api/value/").concat("61685af0e5a81699697aeb42"));case 3:t=e.sent,x(t.value),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),r=function(){var e=Object(l.a)(u.a.mark((function e(){var t,a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B("".concat("https://niepospolita-restauracja.herokuapp.com","/api/time/"));case 3:t=e.sent,w(t.time),a=t.time.find((function(e){return e._id===H})),n=a.available,M(n),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B("".concat("https://niepospolita-restauracja.herokuapp.com","/api/delivery/").concat("617bc3415add00f3c5d37619"));case 3:t=e.sent,E(t.delivery_price),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B("".concat("https://niepospolita-restauracja.herokuapp.com","/api/bonus-delivery/").concat("6183e76c434fe163aa0696ff"));case 3:t=e.sent,A(t.bonus_delivery_price.value),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();i(),c(),e(),t(),a(),r()}),[B,H]);var F=function(e){var t;if("WSZYSTKO"===e.target.innerHTML)t=s;else{var a=e.target.innerHTML.toLowerCase();t=s.filter((function(e){return e.category.toLowerCase().includes(a)}))}n(t)},K=m.map((function(e){return Object(j.jsx)("li",{onClick:F,children:e.name},e.id)}));return Object(j.jsxs)("div",{className:"store",children:[Object(j.jsxs)("div",{className:"store-info",children:[Object(j.jsx)("h1",{children:"Zam\xf3w online!"}),Object(j.jsxs)("p",{children:[q&&q," -",!P&&Object(j.jsx)("b",{style:{color:"red"},children:"W dzisiejszym dniu nie dowozimy!"}),P&&Object(j.jsxs)("span",{children:[" W dzisiejszym dniu dowozimy w godzinach ",Object(j.jsx)("b",{children:k&&q&&H&&function(){var e,t;if(k&&q&&H){var a=(t=k.find((function(e){return e._id===H}))).time.start.hour,n=t.time.start.minute,r=t.time.end.hour,c=t.time.end.minute;e="".concat(a<10?"0"+a:a,":").concat(n<10?"0"+n:n," - ").concat(r<10?"0"+r:r,":").concat(c<10?"0"+c:c)}return e}()})]})]}),Object(j.jsxs)("p",{children:["Minimalna kwota zam\xf3wienia: ",Object(j.jsxs)("b",{children:[f&&f.value," z\u0142"]})]}),Object(j.jsxs)("p",{children:["Koszt dostawy: ",Object(j.jsxs)("b",{children:[S&&S.value," z\u0142"]}),". W przypadku dowozu poza Lublin koszt obliczany wg odleg\u0142o\u015bci."]}),D&&Object(j.jsxs)("p",{children:["Zam\xf3wienie powy\u017cej ",Object(j.jsxs)("b",{children:[D," z\u0142"]})," ",Object(j.jsx)("b",{style:{color:"lightgreen"},children:"dostawa gratis!"})]})]}),Object(j.jsx)(me,{children:Object(j.jsxs)("div",{className:"categories",children:[Object(j.jsx)("h2",{children:"Wybierz kategori\u0119"}),Object(j.jsxs)("ul",{style:{color:"white"},children:[Object(j.jsx)("li",{onClick:F,children:"WSZYSTKO"}),m.length>0&&K]})]})}),Object(j.jsxs)("div",{className:"store-items",children:[Z&&Object(j.jsx)(N,{asOverlay:!0}),a&&function(){var e;return a&&(e=a.filter((function(e){return!0===e.available})).map((function(e){return Object(j.jsx)(be,{id:e.id,name:e.name,price:e.price,description:e.description,image:e.image,category:e.category,available:e.available},e.id)}))),e}()]})]})},ve=(a(89),a(51)),fe=a.n(ve),xe=function(){var e=Object(r.useState)({valid:!1,message:""}),t=Object(p.a)(e,2),a=t[0],n=t[1],i=C(),s=i.isLoading,o=i.error,m=i.sendRequest,O=i.clearError,h=Object(r.useState)(!1),v=Object(p.a)(h,2),f=v[0],x=v[1],y=Object(r.useState)(!1),g=Object(p.a)(y,2),k=g[0],w=g[1],z=Object(r.useState)(!1),I=Object(p.a)(z,2),S=I[0],E=I[1],T=Object(r.useState)(!1),_=Object(p.a)(T,2),A=_[0],V=_[1],W=Object(r.useState)(!1),P=Object(p.a)(W,2),M=P[0],R=P[1],Z=Object(r.useState)(!1),B=Object(p.a)(Z,2),L=B[0],q=B[1],H=Object(r.useState)([]),F=Object(p.a)(H,2),K=F[0],U=F[1],J=Object(r.useContext)(le),G=J.cartItems,Y=J.removeProduct,X=J.increase,Q=J.decrease,$=J.total,ee=J.addBonusItem,te=J.bonusItem,ae=Oe(),ne=ae.today,re=ae.dayId,ce=ae.currentHour,ie=ae.currentMinute;Object(r.useEffect)((function(){window.scrollTo(0,0);var e=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m("".concat("https://niepospolita-restauracja.herokuapp.com","/api/value/").concat("61685af0e5a81699697aeb42"));case 3:t=e.sent,x(t.value),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m("".concat("https://niepospolita-restauracja.herokuapp.com","/api/time/"));case 3:t=e.sent,w(t.time),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),a=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m("".concat("https://niepospolita-restauracja.herokuapp.com","/api/delivery/").concat("617bc3415add00f3c5d37619"));case 3:t=e.sent,E(t.delivery_price.value),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),n=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m("".concat("https://niepospolita-restauracja.herokuapp.com","/api/bonus/"));case 3:t=e.sent,U(t.bonusItems),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),r=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m("".concat("https://niepospolita-restauracja.herokuapp.com","/api/bonus-items/").concat("6183e735434fe163aa0696fa"));case 3:t=e.sent,R(t.bonus_items_price.value),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m("".concat("https://niepospolita-restauracja.herokuapp.com","/api/bonus-delivery/").concat("6183e76c434fe163aa0696ff"));case 3:t=e.sent,V(t.bonus_delivery_price.value),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e(),t(),a(),n(),r(),c()}),[m]),Object(r.useEffect)((function(){var e={valid:!1,message:""};if(G&&k&&ne&&re&&ce&&ie){var t=k.find((function(e){return e._id===re})),a=t.time.end.hour,r=t.time.end.minute;t.available?$<f.value?(e.valid=!1,e.message="Minimalna kwota zam\xf3wienia to ".concat(f.value," z\u0142")):a<ce||a===ce&&r<=ie?(e.valid=!1,e.message="W dzisiejszym dniu ju\u017c nie dowozimy. Zapraszamy ponownie."):(e.valid=!0,e.message=""):(e.valid=!1,e.message="W dzisiejszym dniu nie dowozimy")}return n(e)}),[G,k,ne,re,ce,ie,$,f]);var se=function(e){q(e.target.id)},oe=G.map((function(e){var t={id:e.id,name:e.name,price:e.price,image:e.image,description:e.description},a=e.price*e.quantity;return Object(j.jsxs)("li",{className:"item-card",children:[Object(j.jsx)("img",{src:"".concat("https://niepospolita.s3.eu-central-1.amazonaws.com","/").concat(e.image),alt:e.name}),Object(j.jsx)("span",{className:"item-name",children:e.name}),Object(j.jsx)("span",{class:"fas fa-minus item-quantity__handler",onClick:function(){Q(t),function(e,t){e<=0&&Y(t)}(e.quantity,t)}}),Object(j.jsx)("span",{class:"item-quantity",onClick:function(){fe.a.setApiKey("AIzaSyCC2-7o0QiPK0-IoueeS0VgFOgUbWNE_Gw"),fe.a.fromAddress("Eiffel Tower").then((function(e){var t=e.results[0].geometry.location,a=t.lat,n=t.lng;console.log(a,n)}),(function(e){console.error(e)}))},children:e.quantity}),Object(j.jsx)("span",{class:"fas fa-plus item-quantity__handler",onClick:function(){X(t)}}),Object(j.jsxs)("span",{class:"item-price",children:[a.toFixed(2)," z\u0142"]}),Object(j.jsx)("span",{class:"fas fa-times item-remove",onClick:function(){Y(t)}})]},e.id)})),ue=K.map((function(e){return Object(j.jsxs)("li",{className:"item-card bonus-item",children:[Object(j.jsx)("img",{src:"".concat("https://niepospolita.s3.eu-central-1.amazonaws.com","/").concat(e.image),alt:e.image}),Object(j.jsxs)("div",{children:[Object(j.jsx)("span",{children:e.name}),Object(j.jsx)("input",{id:e._id,type:"checkbox",onChange:se,onClick:function(){return ee(e)},checked:e._id===(L||te&&te.id),style:{display:"block",margin:"auto",marginTop:"1em"}})]})]},e._id)}));return Object(j.jsxs)(c.a.Fragment,{children:[s&&Object(j.jsx)(N,{asOverlay:!0}),Object(j.jsx)(D,{error:o,onClear:O}),Object(j.jsxs)("div",{className:"cart",children:[Object(j.jsx)("h1",{onClick:function(){return console.log(te)},children:"Tw\xf3j koszyk"}),G.length>0&&Object(j.jsxs)("div",{className:"cart-info",children:[Object(j.jsxs)("p",{children:["Koszt dowozu: ",Object(j.jsxs)("b",{children:[S&&S," z\u0142"]}),", w przypadku dowozu poza Lublin koszt obliczany wg odleg\u0142o\u015bci."]}),A&&Object(j.jsxs)("p",{children:["Zam\xf3wienie powy\u017cej ",A," z\u0142 ",Object(j.jsx)("b",{style:{color:"lightgreen"},children:"dostawa gratis!"})]}),K.length>0&&M&&Object(j.jsxs)("p",{children:["Zam\xf3wienie powy\u017cej ",M," z\u0142 ",Object(j.jsx)("b",{style:{color:"lightgreen"},children:"produkt gratis!"})]})]}),G.length>0&&Object(j.jsx)(me,{children:Object(j.jsxs)("div",{className:"cart-products",children:[Object(j.jsxs)("li",{className:"item-card titles",children:[Object(j.jsx)("span",{className:"item-name",children:"Produkt"}),Object(j.jsx)("span",{className:"item-quantity-title",children:"Ilo\u015b\u0107"}),Object(j.jsx)("span",{className:"item-price-title",children:"Cena"})]}),oe,Object(j.jsxs)("li",{className:"item-card summary ",children:[Object(j.jsx)("span",{className:"item-name"}),Object(j.jsxs)("span",{className:"total",children:["SUMA:  ",Object(j.jsxs)("b",{style:{marginLeft:"5px",color:"white"},children:[$.toFixed(2)," z\u0142"]}),$.toFixed(2)<=A?Object(j.jsxs)("b",{children:[" + (",S," z\u0142 dostawa)"]}):Object(j.jsxs)("span",{style:{fontSize:"0.7em",color:"lightgreen"},children:["(powy\u017cej ",A," z\u0142 dostawa gratis)"]})," "]})]}),Object(j.jsx)("li",{className:"item-card__alert",children:Object(j.jsx)("span",{children:!a.valid&&f&&Object(j.jsx)("p",{style:{marginRight:"1em"},children:a.message})})}),$.toFixed(2)>M&&Object(j.jsxs)("div",{children:[Object(j.jsx)("h3",{children:"Wybierz produkt gratis"}),Object(j.jsx)("div",{className:"bonus",children:ue})]})]})}),!G.length>0&&Object(j.jsx)("h3",{style:{color:"white"},children:"Brak produkt\xf3w w koszyku"}),G.length>0&&Object(j.jsx)(d.b,{to:"/zamowienie",children:Object(j.jsx)(b,{disabled:!a.valid,children:"Przejd\u017a do zam\xf3wienia"})}),!G.length>0&&Object(j.jsx)(d.b,{to:"/",children:Object(j.jsx)(b,{children:"Przejd\u017a do sklepu"})})]})]})},ye=(a(90),a(32)),ge=a(148),ke=function(){var e=C(),t=e.isLoading,a=e.error,n=e.sendRequest,i=e.clearError,s=Object(r.useState)(!1),o=Object(p.a)(s,2),d=o[0],O=o[1],h=Object(r.useState)("nie okre\u015blono"),v=Object(p.a)(h,2),f=v[0],x=v[1],g=Object(r.useState)(),w=Object(p.a)(g,2),z=w[0],S=w[1],E=Object(r.useState)(),T=Object(p.a)(E,2),_=T[0],A=T[1],V=Object(r.useState)(!1),P=Object(p.a)(V,2),M=P[0],R=P[1],Z=Object(r.useState)(!1),B=Object(p.a)(Z,2),L=B[0],q=B[1],H=Object(r.useState)(!1),F=Object(p.a)(H,2),K=F[0],U=F[1],J=Object(ye.useStripe)(),G=Object(ae.g)(),Y=Oe(),X=Y.today,Q=Y.dayId,$=Y.currentHour,ee=Y.currentMinute,te=Object(r.useContext)(le),ne=te.cartItems,re=te.total,ce=te.bonusItem;Object(r.useEffect)((function(){window.scrollTo(0,0);var e=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n("".concat("https://niepospolita-restauracja.herokuapp.com","/api/delivery/").concat("617bc3415add00f3c5d37619"));case 3:t=e.sent,O(t.delivery_price.value),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n("".concat("https://niepospolita-restauracja.herokuapp.com","/api/time/"));case 3:t=e.sent,U(t.time),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e(),t()}),[n]),Object(r.useEffect)((function(){var e,t;if(K&&X&&Q&&$&&ee){var a=K.find((function(e){return e._id===Q})),n=a.time.start.hour,r=a.time.start.minute,c=a.time.end.hour,i=a.time.end.minute;r=a.time.start.minute<10?a.time.start.minute+"0":a.time.start.minute,t=(c+":"+(i=a.time.end.minute<10?a.time.end.minute+"0":a.time.end.minute)).toString(),e=$>n||$===n&&ee>r?ee>45?($+2+":00").toString():ee>30?($+1+":45").toString():ee>15?($+1+":30").toString():($+1+":15").toString():(n+1+":"+r).toString(),($>=c||$===c-1&&ee>i)&&R(!0)}e&&t&&(S(new Date("8/3/2017 ".concat(e))),A(new Date("8/3/2017 ".concat(t))))}),[K,X,Q,$,ee]);var ie=W({street:{value:"",isValid:!1},local:{value:"",isValid:!1},apartament:{value:null,isValid:!0},zipCode:{value:"",isValid:!1},city:{value:"",isValid:!1},email:{value:"",isValid:!1},phoneNumber:{value:"",isValid:!1},message:{value:null,isValid:!0}},!1),se=Object(p.a)(ie,2),oe=se[0],ue=se[1],pe=function(){var e=Object(l.a)(u.a.mark((function e(t){var a,r,c,i,s,o,l,p,j,b;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=ne.map((function(e){return{quantity:e.quantity,name:e.name,price:e.price}})),ne&&d&&(r=ne.map((function(e){return{quantity:e.quantity,price_data:{currency:"pln",unit_amount:100*e.price,product_data:{name:e.name,description:e.description}}}})),c={quantity:1,price_data:{currency:"pln",unit_amount:100*d,product_data:{name:"op\u0142ata za dow\xf3z"}}},re>=80&&ce?r.push({quantity:1,price_data:{currency:"pln",unit_amount:0,product_data:{name:ce.item+" gratis"}}}):re<=60&&r.push(c)),i={street:oe.inputs.street.value,local:oe.inputs.local.value,zipCode:oe.inputs.zipCode.value,city:oe.inputs.city.value},i=oe.inputs.apartament.value?Object(m.a)(Object(m.a)({},i),{},{apartament:oe.inputs.apartament.value}):Object(m.a)(Object(m.a)({},i),{},{apartament:!1}),i=oe.inputs.message.value?Object(m.a)(Object(m.a)({},i),{},{message:oe.inputs.message.value}):Object(m.a)(Object(m.a)({},i),{},{message:"brak"}),"payment-online"!==t.target.id||M){e.next=20;break}return e.prev=7,e.next=10,n("".concat("https://niepospolita-restauracja.herokuapp.com","/api/checkout/"),"POST",JSON.stringify({line_items:r,customer_email:oe.inputs.email.value,message:oe.inputs.message.value,deliveryHour:f.toString(),phone:oe.inputs.phoneNumber.value,address:i,option:"order"}),{"Content-Type":"application/json"});case 10:return s=e.sent,o=s.sessionId,e.next=14,J.redirectToCheckout({sessionId:o});case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(7);case 18:e.next=35;break;case 20:if("payment-offline"!==t.target.id||M){e.next=35;break}return j=t.target.name,re&&d&&re<=60?(l=d+"z\u0142",p=re+d):(l="dostawa gratis",p=re),b="brak",ce&&re>80&&(b=ce.item),e.prev=25,e.next=28,n("".concat("https://niepospolita-restauracja.herokuapp.com","/api/mail/"),"POST",JSON.stringify({customer_email:oe.inputs.email.value,customer_phoneNumber:oe.inputs.phoneNumber.value,customer_address:i,customer_items:a,total:p,delivery_info:l,bonusItemName:b,timepickerValue:f,paymentMethod:j}),{"Content-Type":"application/json"});case 28:return e.next=30,G.push("/success");case 30:window.location.reload(),e.next=35;break;case 33:e.prev=33,e.t1=e.catch(25);case 35:case"end":return e.stop()}}),e,null,[[7,16],[25,33]])})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)(c.a.Fragment,{children:[t&&Object(j.jsx)(N,{asOverlay:!0}),Object(j.jsx)(D,{error:a,onClear:i}),Object(j.jsxs)("div",{className:"order",children:[Object(j.jsx)("h1",{children:"Uzupe\u0142nij dane do zam\xf3wienia"}),Object(j.jsxs)(me,{children:[!M&&Object(j.jsxs)("form",{children:[Object(j.jsxs)("div",{className:"address-street",children:[Object(j.jsx)(I,{id:"street",element:"input",type:"text",label:"Ulica",validators:[y()],errorText:"Wprowad\u017a poprawn\u0105 nazw\u0119 ulicy.",onInput:ue}),Object(j.jsx)(I,{id:"local",element:"input",type:"text",label:"Nr lokalu",validators:[y()],errorText:"Podaj poprawny nr lokalu.",onInput:ue}),Object(j.jsx)(I,{id:"apartament",element:"input",type:"text",label:"Nr mieszkania",validators:null,initialValid:!0,onInput:ue})]}),Object(j.jsxs)("div",{className:"address-city",children:[Object(j.jsx)("div",{className:"address-city__zip",style:{position:"relative"},children:Object(j.jsx)("div",{className:"address-city__zip-input",children:Object(j.jsx)(I,{id:"zipCode",element:"input",type:"text",label:"Kod pocztowy",validators:[y()],errorText:"Podaj poprawny kod pocztowy.",onInput:ue})})}),Object(j.jsx)("div",{className:"address-city__city",children:Object(j.jsx)(I,{id:"city",element:"input",type:"text",label:"Miasto",validators:[y()],errorText:"Podaj poprawn\u0105 nazw\u0119 miasta.",onInput:ue})})]}),Object(j.jsx)(I,{id:"email",element:"input",type:"email",label:"Email",validators:[y(),k],errorText:"Podaj poprawny email.",onInput:ue}),Object(j.jsx)(I,{id:"phoneNumber",element:"input",type:"text",label:"Numer telefonu",validators:[y()],errorText:"Podaj nr telefonu.",onInput:ue}),Object(j.jsx)(I,{id:"message",element:"textarea",type:"text",label:"Komentarz do dostawcy",validators:null,initialValid:!0,onInput:ue}),Object(j.jsx)("label",{style:{fontWeight:"bold",marginBottom:"0.5rem",minHeight:"28px"},children:"Wybierz oczekiwany czas dowozu:"}),Object(j.jsx)("div",{className:"timepicker",children:Object(j.jsx)(ge.a,{placeholder:"wybierz godzin\u0119",format:"HH:mm",step:15,min:z,max:_,onChange:function(e){var t,a;e.target.value?(t=e.target.value.getHours(),(a=e.target.value.getMinutes())<10&&(a="0"+e.target.value.getMinutes()),x(t+":"+a)):x("nie okre\u015blono")}})}),Object(j.jsxs)("div",{children:[Object(j.jsx)(b,{disabled:!oe.isValid||M,id:"payment-offline",onClick:function(e){e.preventDefault(),q((function(e){return!e}))},isClicked:L,children:"P\u0141ATNO\u015a\u0106 PRZY ODBIORZE"}),Object(j.jsx)(b,{disabled:!oe.isValid||M||L,id:"payment-online",onClick:pe,children:"P\u0141ATNO\u015a\u0106 ONLINE"})]}),L&&Object(j.jsxs)("div",{style:{margin:"1em"},children:[Object(j.jsx)(b,{disabled:!oe.isValid||M,id:"payment-offline",payment:"karta",onClick:pe,children:"P\u0141ATNO\u015a\u0106 KART\u0104"}),Object(j.jsx)(b,{disabled:!oe.isValid||M,id:"payment-offline",payment:"got\xf3wka",onClick:pe,children:"P\u0141ATNO\u015a\u0106 GOT\xd3WK\u0104"})]})]}),M&&Object(j.jsx)("p",{style:{color:"red"},children:"Dzi\u015b ju\u017c nie dowozimy, zapraszamy ponownie."})]})]})]})},we=(a.p,function(){var e=Object(r.useState)(!1),t=Object(p.a)(e,2),a=t[0],n=t[1],i=C(),s=i.isLoading,o=i.error,b=i.sendRequest,m=i.clearError;return Object(r.useEffect)((function(){var e=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b("".concat("https://niepospolita-restauracja.herokuapp.com","/api/deliverytime/").concat("6183c6c50e63c1ac6af40a7e"));case 3:t=e.sent,n(t.deliveryTime.time),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[b]),Object(j.jsxs)(c.a.Fragment,{children:[Object(j.jsx)(D,{error:o,onClear:m}),s&&Object(j.jsx)(N,{asOverlay:!0}),Object(j.jsxs)("div",{className:"store",children:[Object(j.jsx)("h1",{style:{marginTop:"1.5em"},children:"ZAM\xd3WIENIE ZOSTA\u0141O PRZEKAZANE DO REALIZACJI"}),Object(j.jsx)("br",{}),a&&Object(j.jsxs)("h2",{children:["Oczekiwany czas dowozu: ",a," min"]}),Object(j.jsx)(d.b,{to:"/",children:Object(j.jsx)("p",{children:"powr\xf3t do sklepu"})})]})]})}),ze=function(){return Object(j.jsxs)("div",{className:"store",children:[Object(j.jsx)("h1",{children:"WYST\u0104PI\u0141 NIEOCZEKIWANY B\u0141\u0104D, SPR\xd3BUJ ZAM\xd3WI\u0106 PONOWNIE P\xd3\u0179NIEJ"}),Object(j.jsx)("br",{}),Object(j.jsx)(d.b,{to:"/",children:Object(j.jsx)("p",{children:"powr\xf3t do sklepu"})})]})},Ie=(a(91),function(e){var t=e.id,a=e.name,n=e.price,r=e.image,i=e.description,s=e.specialItemCheckedId,o=e.changeClickedProductId;return Object(j.jsx)(c.a.Fragment,{children:Object(j.jsxs)("div",{className:"item-card",children:[Object(j.jsx)("div",{className:"item-card__image",children:Object(j.jsx)("img",{src:"".concat("https://niepospolita.s3.eu-central-1.amazonaws.com","/").concat(r),alt:a})}),Object(j.jsxs)("div",{className:"item-card__info",children:[Object(j.jsxs)("p",{className:" name price",children:[Object(j.jsx)("span",{style:{fontWeight:"bold"},children:a}),Object(j.jsxs)("span",{style:{fontWeight:"bold",marginLeft:"0.7em"},children:[n," z\u0142"]})]}),Object(j.jsx)("p",{className:"description",children:i}),Object(j.jsx)(b,{id:t,onClick:o,isClicked:t.toString()===s,children:"WYBIERZ"})]})]})})}),Ce=a(58),Ne=a.n(Ce),Se=(a(92),function(){var e=Object(r.useState)([]),t=Object(p.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(!1),i=Object(p.a)(c,2),s=(i[0],i[1]),o=Object(r.useState)(""),d=Object(p.a)(o,2),m=(d[0],d[1]),O=Object(r.useState)(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()+1)),h=Object(p.a)(O,2),v=h[0],f=h[1],x=Object(r.useState)(0),k=Object(p.a)(x,2),w=k[0],z=k[1],N=Object(r.useState)(!1),S=Object(p.a)(N,2),E=S[0],T=S[1],_=Object(r.useState)([]),D=Object(p.a)(_,2),A=D[0],V=D[1],P=C(),M=(P.isLoading,P.error,P.sendRequest),R=(P.clearError,W({hour:{value:"",isValid:!1},guests:{value:"",isValid:!1}},!1)),Z=Object(p.a)(R,2),B=Z[0],L=Z[1];Object(r.useEffect)((function(){var e,t=function(){var e=Object(l.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M("".concat("https://niepospolita-restauracja.herokuapp.com","/api/items/"));case 3:t=e.sent,a=t.items.filter((function(e){return!0===e.special})),V(a),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();v&&(e=v.getDay()-1)<0&&(e=6),console.log(e);var a=function(){var t=Object(l.a)(u.a.mark((function t(){var a,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,M("".concat("https://niepospolita-restauracja.herokuapp.com","/api/reservation"));case 3:a=t.sent,s(a.reservations[0].available.value),m(a.reservations[0].available.message),n(a.reservations[0].days[e].availableHours),B.inputs.hour.isValid&&(r=a.reservations[0].days[e].availableHours.find((function(e){return e.hour===parseInt(B.inputs.hour.value)})),z(r.guests)),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(0);case 12:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}();a(),t()}),[M,v,B.inputs.hour.isValid,B.inputs.hour.value]);var q,H=function(e){if(e.preventDefault(),E===e.target.id)return T(!1);T(e.target.value)},F=function(){var e=Object(l.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),A&&E&&(a={quantity:1,price_data:{currency:"pln",unit_amount:100*A[E].price,product_data:{name:A[E].name,description:A[E].description}}}),console.log(a);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=a.map((function(e){return Object(j.jsxs)("option",{value:e.hour,children:[e.hour,":00"]})}));return Object(j.jsxs)("div",{className:"special",children:[A.length>0&&Object(j.jsxs)("div",{className:"special-items",children:[Object(j.jsx)("h1",{onClick:function(){return console.log(A)},children:"Wybierz produkt i zarezerwuj stolik"}),function(){var e;return A.length>0&&(e=A.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,t){return Object(j.jsx)(Ie,{id:t,name:e.name,price:e.price,description:e.description,image:e.image,changeClickedProductId:H,specialItemCheckedId:E},t)}))),e}()]}),E&&Object(j.jsxs)("form",{onSubmit:F,className:"special-reservation",children:[Object(j.jsx)("label",{style:{fontWeight:"bold",marginBottom:"0.5em",minHeight:"28px",display:"block"},children:"Wybierz dat\u0119:"}),Object(j.jsx)(Ne.a,{id:"date",selected:v,onChange:function(e){f(e),B.inputs.hour.value="",B.inputs.hour.isValid=!1,B.inputs.guests.value="",B.inputs.guests.isValid=!1,z(0)},dateFormat:"dd/MM/yyyy",minDate:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()+1),maxDate:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()+10)}),Object(j.jsx)(I,{id:"hour",element:"select",name:"select",label:"Wybierz godzin\u0119:",validators:[y()],errorText:"Prosz\u0119 wybra\u0107 godzin\u0119.",onInput:L,options:K}),Object(j.jsx)(I,{id:"guests",element:"input",type:"number",label:"Wybierz liczb\u0119 go\u015bci: \n                ".concat(w>0&&B.inputs.hour.isValid?"(na godzin\u0119 ".concat(B.inputs.hour.value,":00 maksymalna liczba go\u015bci - ").concat(w,")"):""),validators:[(q=0,{type:"MIN",val:q}),g(w)],errorText:"Nieprawid\u0142owa liczba go\u015bci",onInput:L,options:K}),Object(j.jsx)(b,{type:"submit",disabled:v&&!B.isValid})]})]})});var Ee=function(){var e=function(){var e=Object(r.useState)(!1),t=Object(p.a)(e,2),a=t[0],c=t[1],i=Object(r.useState)(),s=Object(p.a)(i,2),o=s[0],u=s[1],l=Object(r.useState)(!1),d=Object(p.a)(l,2),j=d[0],b=d[1],m=Object(r.useState)(!1),O=Object(p.a)(m,2),h=O[0],v=O[1],f=Object(r.useCallback)((function(e,t,a,n){c(t),b(e),v(a);var r=n||new Date((new Date).getTime()+36e5);u(r),localStorage.setItem("userData",JSON.stringify({userId:e,token:t,role:a,expiration:r.toISOString()}))}),[]),x=Object(r.useCallback)((function(){c(null),u(null),b(null),v(null),localStorage.removeItem("userData")}),[]);return Object(r.useEffect)((function(){if(a&&o){var e=o.getTime()-(new Date).getTime();n=setTimeout(x,e)}else clearTimeout(n)}),[a,x,o]),Object(r.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&new Date(e.expiration)>new Date&&f(e.userId,e.token,e.role,new Date(e.expiration))}),[f]),{token:a,login:f,logout:x,userId:j,role:h}}(),t=e.token,a=e.login,c=e.logout,i=e.userId,s=e.role,o=Object(j.jsxs)(ae.d,{children:[Object(j.jsxs)(ae.b,{path:"/",exact:!0,children:[Object(j.jsx)(ie,{}),Object(j.jsx)(he,{})]}),Object(j.jsxs)(ae.b,{path:"/koszyk",children:[Object(j.jsx)(ie,{}),Object(j.jsx)(xe,{})]}),Object(j.jsxs)(ae.b,{path:"/special",children:[Object(j.jsx)(ie,{}),Object(j.jsx)(Se,{})]}),Object(j.jsxs)(ae.b,{path:"/zamowienie",children:[Object(j.jsx)(ie,{}),Object(j.jsx)(ke,{})]}),Object(j.jsxs)(ae.b,{path:"/success",children:[Object(j.jsx)(ie,{}),Object(j.jsx)(we,{})]}),Object(j.jsxs)(ae.b,{path:"/failed",children:[Object(j.jsx)(ie,{}),Object(j.jsx)(ze,{})]}),Object(j.jsxs)(ae.b,{path:"/admin",children:[Object(j.jsx)(M,{}),Object(j.jsx)(te,{})]}),Object(j.jsx)(ae.a,{to:"/"})]});return Object(j.jsx)(d.a,{children:Object(j.jsx)(P.Provider,{value:{isLoggedIn:!!t,token:t,userId:i,role:s,login:a,logout:c},children:Object(j.jsx)(de,{children:Object(j.jsxs)("div",{className:"App",style:{backgroundColor:"black",minHeight:"100vh",display:"flex",flexDirection:"column"},children:[o,Object(j.jsx)(se,{})]})})})})},Te=a(61),_e=Object(Te.a)("pk_live_51JnOXrGByGuq2bjBnw3P9krgrs1piJ4H62MUdbb93Jqx3W7iwsp2s3tnmpjVqqKPS69SA3RVKZO3PqjY7PORKAz700Z9PewOR3");s.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(ye.Elements,{stripe:_e,children:Object(j.jsx)(Ee,{})})}),document.getElementById("root"))},42:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){}},[[136,1,2]]]);
//# sourceMappingURL=main.9c710600.chunk.js.map
(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[6],{161:function(e,t,a){"use strict";a.r(t);var n=a(6),c=a.n(n),s=a(12),r=a(2),i=a(1),o=a.n(i),l=(a(97),a(14)),u=a(17),j=a(16),p=a(33),d=a(21),b=a(23),m=a(32),h=a(8),O=a(0);t.default=function(){var e=Object(i.useState)({valid:!1,message:""}),t=Object(r.a)(e,2),a=t[0],n=t[1],x=Object(j.a)(),f=x.isLoading,v=x.error,w=x.sendRequest,k=x.clearError,y=Object(i.useState)(!1),g=Object(r.a)(y,2),z=g[0],N=g[1],_=Object(i.useState)(!1),S=Object(r.a)(_,2),C=S[0],q=S[1],I=Object(i.useState)(!1),F=Object(r.a)(I,2),P=F[0],E=F[1],L=Object(i.useState)(!1),M=Object(r.a)(L,2),T=M[0],W=M[1],Z=Object(i.useState)(!1),B=Object(r.a)(Z,2),J=B[0],R=B[1],A=Object(i.useState)(!1),H=Object(r.a)(A,2),K=H[0],U=H[1],D=Object(i.useState)([]),G=Object(r.a)(D,2),Q=G[0],V=G[1],X=Object(i.useContext)(b.a),Y=X.cartItems,$=X.removeProduct,ee=X.increase,te=X.decrease,ae=X.total,ne=X.addBonusItem,ce=X.bonusItem,se=Object(p.a)(),re=se.today,ie=se.dayId,oe=se.currentHour,le=se.currentMinute;Object(i.useEffect)((function(){window.scrollTo(0,0);var e=function(){var e=Object(s.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w("".concat("https://niepospolita-restauracja.herokuapp.com","/api/value/").concat("61685af0e5a81699697aeb42"));case 3:t=e.sent,N(t.value),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(s.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w("".concat("https://niepospolita-restauracja.herokuapp.com","/api/time/"));case 3:t=e.sent,q(t.time),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),a=function(){var e=Object(s.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w("".concat("https://niepospolita-restauracja.herokuapp.com","/api/delivery/").concat("617bc3415add00f3c5d37619"));case 3:t=e.sent,E(t.delivery_price.value),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),n=function(){var e=Object(s.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w("".concat("https://niepospolita-restauracja.herokuapp.com","/api/bonus/"));case 3:t=e.sent,V(t.bonusItems),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),r=function(){var e=Object(s.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w("".concat("https://niepospolita-restauracja.herokuapp.com","/api/bonus-items/").concat("6183e735434fe163aa0696fa"));case 3:t=e.sent,R(t.bonus_items_price.value),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(s.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w("".concat("https://niepospolita-restauracja.herokuapp.com","/api/bonus-delivery/").concat("6183e76c434fe163aa0696ff"));case 3:t=e.sent,W(t.bonus_delivery_price.value),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e(),t(),a(),n(),r(),i()}),[w]),Object(i.useEffect)((function(){var e={valid:!1,message:""};if(Y&&C&&re&&ie&&oe&&le){var t=C.find((function(e){return e._id===ie})),a=t.time.end.hour,c=t.time.end.minute;t.available?ae<z.value?(e.valid=!1,e.message="Minimalna kwota zam\xf3wienia to ".concat(z.value," z\u0142")):a<oe||a===oe&&c<=le?(e.valid=!1,e.message="W dzisiejszym dniu ju\u017c nie dowozimy. Zapraszamy ponownie."):(e.valid=!0,e.message=""):(e.valid=!1,e.message="W dzisiejszym dniu nie dowozimy")}return n(e)}),[Y,C,re,ie,oe,le,ae,z]);var ue=function(e){U(e.target.id)},je=Y.map((function(e){var t={id:e.id,name:e.name,price:e.price,image:e.image,description:e.description},a=e.price*e.quantity;return Object(O.jsxs)("li",{className:"item-card",children:[Object(O.jsx)("img",{src:"".concat("https://niepospolita.s3.eu-central-1.amazonaws.com","/").concat(e.image),alt:e.name}),Object(O.jsx)("span",{className:"item-name",children:e.name}),Object(O.jsx)("span",{class:"fas fa-minus item-quantity__handler",onClick:function(){te(t),function(e,t){e<=0&&$(t)}(e.quantity,t)}}),Object(O.jsx)("span",{class:"item-quantity",children:e.quantity}),Object(O.jsx)("span",{class:"fas fa-plus item-quantity__handler",onClick:function(){ee(t)}}),Object(O.jsxs)("span",{class:"item-price",children:[a.toFixed(2)," z\u0142"]}),Object(O.jsx)("span",{class:"fas fa-times item-remove",onClick:function(){$(t)}})]},e.id)})),pe=Q.map((function(e){return Object(O.jsxs)("li",{className:"item-card bonus-item",children:[Object(O.jsx)("img",{src:"".concat("https://niepospolita.s3.eu-central-1.amazonaws.com","/").concat(e.image),alt:e.image}),Object(O.jsxs)("div",{children:[Object(O.jsx)("span",{children:e.name}),Object(O.jsx)("input",{id:e._id,type:"checkbox",onChange:ue,onClick:function(){return ne(e)},checked:e._id===(K||ce&&ce.id),style:{display:"block",margin:"auto",marginTop:"1em"}})]})]},e._id)}));return Object(O.jsxs)(o.a.Fragment,{children:[f&&Object(O.jsx)(u.a,{asOverlay:!0}),Object(O.jsx)(d.a,{error:v,onClear:k}),Object(O.jsxs)("div",{className:"cart",children:[Object(O.jsx)("h1",{children:"Tw\xf3j koszyk"}),Y.length>0&&Object(O.jsxs)("div",{className:"cart-info",children:[Object(O.jsxs)("p",{children:["Koszt dowozu: ",Object(O.jsxs)("b",{children:[P&&P," z\u0142"]}),", w przypadku dowozu poza Lublin koszt obliczany wg odleg\u0142o\u015bci."]}),Object(O.jsx)("p",{children:"Cena produkt\xf3w zawiera koszt opakowania jednorazowego"}),T&&Object(O.jsxs)("p",{children:["Zam\xf3wienie powy\u017cej ",T," z\u0142 ",Object(O.jsx)("b",{style:{color:"lightgreen"},children:"dostawa gratis!"})]}),Q.length>0&&J&&Object(O.jsxs)("p",{children:["Zam\xf3wienie powy\u017cej ",J," z\u0142 ",Object(O.jsx)("b",{style:{color:"lightgreen"},children:"produkt gratis!"})]})]}),Y.length>0&&Object(O.jsx)(m.a,{children:Object(O.jsxs)("div",{className:"cart-products",children:[Object(O.jsxs)("li",{className:"item-card titles",children:[Object(O.jsx)("span",{className:"item-name",children:"Produkt"}),Object(O.jsx)("span",{className:"item-quantity-title",children:"Ilo\u015b\u0107"}),Object(O.jsx)("span",{className:"item-price-title",children:"Cena"})]}),je,Object(O.jsxs)("li",{className:"item-card summary ",children:[Object(O.jsx)("span",{className:"item-name"}),Object(O.jsxs)("span",{className:"total",children:["SUMA:  ",Object(O.jsxs)("b",{style:{marginLeft:"5px",color:"white"},children:[ae.toFixed(2)," z\u0142"]}),ae.toFixed(2)<=T?Object(O.jsxs)("b",{children:[" + (",P," z\u0142 dostawa)"]}):Object(O.jsxs)("span",{style:{fontSize:"0.7em",color:"lightgreen"},children:["(powy\u017cej ",T," z\u0142 dostawa gratis)"]})," "]})]}),Object(O.jsx)("li",{className:"item-card__alert",children:Object(O.jsx)("span",{children:!a.valid&&z&&Object(O.jsx)("p",{style:{marginRight:"1em"},children:a.message})})}),ae.toFixed(2)>J&&Object(O.jsxs)("div",{children:[Object(O.jsx)("h3",{children:"Wybierz produkt gratis"}),Object(O.jsx)("div",{className:"bonus",children:pe})]})]})}),!Y.length>0&&Object(O.jsx)("h3",{style:{color:"white"},children:"Brak produkt\xf3w w koszyku"}),Y.length>0&&Object(O.jsx)(h.b,{to:"/zamowienie",children:Object(O.jsx)(l.a,{disabled:!a.valid,children:"Przejd\u017a do zam\xf3wienia"})}),!Y.length>0&&Object(O.jsx)(h.b,{to:"/",children:Object(O.jsx)(l.a,{children:"Przejd\u017a do sklepu"})})]})]})}},97:function(e,t,a){}}]);
//# sourceMappingURL=6.958e0101.chunk.js.map
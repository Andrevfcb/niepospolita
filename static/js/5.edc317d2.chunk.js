(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[5],{162:function(e,t,n){"use strict";n.r(t);var a=n(6),r=n.n(a),c=n(12),s=n(2),i=n(1),o=n.n(i),u=(n(97),n(14)),l=n(17),d=n(16),p=n(33),j=n(21),m=n(23),b=n(32),f=n(9),h=n(98),v=n.n(h),x=n(0);t.default=function(){var e=Object(i.useState)({valid:!1,message:""}),t=Object(s.a)(e,2),n=t[0],a=t[1],h=Object(d.a)(),O=h.isLoading,g=h.error,w=h.sendRequest,y=h.clearError,k=Object(i.useState)(!1),z=Object(s.a)(k,2),_=z[0],P=z[1],C=Object(i.useState)(!1),N=Object(s.a)(C,2),S=N[0],E=N[1],I=Object(i.useState)(!1),q=Object(s.a)(I,2),R=q[0],L=q[1],U=Object(i.useState)(!1),A=Object(s.a)(U,2),F=A[0],K=A[1],T=Object(i.useState)(!1),M=Object(s.a)(T,2),W=M[0],Z=M[1],B=Object(i.useState)(!1),J=Object(s.a)(B,2),D=J[0],G=J[1],H=Object(i.useState)([]),Q=Object(s.a)(H,2),V=Q[0],X=Q[1],Y=Object(i.useContext)(m.a),$=Y.cartItems,ee=Y.removeProduct,te=Y.increase,ne=Y.decrease,ae=Y.total,re=Y.addBonusItem,ce=Y.bonusItem,se=Object(p.a)(),ie=se.today,oe=se.dayId,ue=se.currentHour,le=se.currentMinute;Object(i.useEffect)((function(){window.scrollTo(0,0);var e=function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w("".concat("https://niepospolita-restauracja.herokuapp.com","/api/value/").concat("61685af0e5a81699697aeb42"));case 3:t=e.sent,P(t.value),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w("".concat("https://niepospolita-restauracja.herokuapp.com","/api/time/"));case 3:t=e.sent,E(t.time),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),n=function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w("".concat("https://niepospolita-restauracja.herokuapp.com","/api/delivery/").concat("617bc3415add00f3c5d37619"));case 3:t=e.sent,L(t.delivery_price.value),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),a=function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w("".concat("https://niepospolita-restauracja.herokuapp.com","/api/bonus/"));case 3:t=e.sent,X(t.bonusItems),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w("".concat("https://niepospolita-restauracja.herokuapp.com","/api/bonus-items/").concat("6183e735434fe163aa0696fa"));case 3:t=e.sent,Z(t.bonus_items_price.value),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w("".concat("https://niepospolita-restauracja.herokuapp.com","/api/bonus-delivery/").concat("6183e76c434fe163aa0696ff"));case 3:t=e.sent,K(t.bonus_delivery_price.value),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e(),t(),n(),a(),s(),i()}),[w]),Object(i.useEffect)((function(){var e={valid:!1,message:""};if($&&S&&ie&&oe&&ue&&le){var t=S.find((function(e){return e._id===oe})),n=t.time.end.hour,r=t.time.end.minute;t.available?ae<_.value?(e.valid=!1,e.message="Minimalna kwota zam\xf3wienia to ".concat(_.value," z\u0142")):n<ue||n===ue&&r<=le?(e.valid=!1,e.message="W dzisiejszym dniu ju\u017c nie dowozimy. Zapraszamy ponownie."):(e.valid=!0,e.message=""):(e.valid=!1,e.message="W dzisiejszym dniu nie dowozimy")}return a(e)}),[$,S,ie,oe,ue,le,ae,_]);var de=function(e){G(e.target.id)},pe=$.map((function(e){var t={id:e.id,name:e.name,price:e.price,image:e.image,description:e.description},n=e.price*e.quantity;return Object(x.jsxs)("li",{className:"item-card",children:[Object(x.jsx)("img",{src:"".concat("https://niepospolita.s3.eu-central-1.amazonaws.com","/").concat(e.image),alt:e.name}),Object(x.jsx)("span",{className:"item-name",children:e.name}),Object(x.jsx)("span",{class:"fas fa-minus item-quantity__handler",onClick:function(){ne(t),function(e,t){e<=0&&ee(t)}(e.quantity,t)}}),Object(x.jsx)("span",{class:"item-quantity",onClick:function(){v.a.setApiKey("AIzaSyCC2-7o0QiPK0-IoueeS0VgFOgUbWNE_Gw"),v.a.fromAddress("Eiffel Tower").then((function(e){var t=e.results[0].geometry.location;t.lat,t.lng}),(function(e){console.error(e)}))},children:e.quantity}),Object(x.jsx)("span",{class:"fas fa-plus item-quantity__handler",onClick:function(){te(t)}}),Object(x.jsxs)("span",{class:"item-price",children:[n.toFixed(2)," z\u0142"]}),Object(x.jsx)("span",{class:"fas fa-times item-remove",onClick:function(){ee(t)}})]},e.id)})),je=V.map((function(e){return Object(x.jsxs)("li",{className:"item-card bonus-item",children:[Object(x.jsx)("img",{src:"".concat("https://niepospolita.s3.eu-central-1.amazonaws.com","/").concat(e.image),alt:e.image}),Object(x.jsxs)("div",{children:[Object(x.jsx)("span",{children:e.name}),Object(x.jsx)("input",{id:e._id,type:"checkbox",onChange:de,onClick:function(){return re(e)},checked:e._id===(D||ce&&ce.id),style:{display:"block",margin:"auto",marginTop:"1em"}})]})]},e._id)}));return Object(x.jsxs)(o.a.Fragment,{children:[O&&Object(x.jsx)(l.a,{asOverlay:!0}),Object(x.jsx)(j.a,{error:g,onClear:y}),Object(x.jsxs)("div",{className:"cart",children:[Object(x.jsx)("h1",{children:"Tw\xf3j koszyk"}),$.length>0&&Object(x.jsxs)("div",{className:"cart-info",children:[Object(x.jsxs)("p",{children:["Koszt dowozu: ",Object(x.jsxs)("b",{children:[R&&R," z\u0142"]}),", w przypadku dowozu poza Lublin koszt obliczany wg odleg\u0142o\u015bci."]}),F&&Object(x.jsxs)("p",{children:["Zam\xf3wienie powy\u017cej ",F," z\u0142 ",Object(x.jsx)("b",{style:{color:"lightgreen"},children:"dostawa gratis!"})]}),V.length>0&&W&&Object(x.jsxs)("p",{children:["Zam\xf3wienie powy\u017cej ",W," z\u0142 ",Object(x.jsx)("b",{style:{color:"lightgreen"},children:"produkt gratis!"})]})]}),$.length>0&&Object(x.jsx)(b.a,{children:Object(x.jsxs)("div",{className:"cart-products",children:[Object(x.jsxs)("li",{className:"item-card titles",children:[Object(x.jsx)("span",{className:"item-name",children:"Produkt"}),Object(x.jsx)("span",{className:"item-quantity-title",children:"Ilo\u015b\u0107"}),Object(x.jsx)("span",{className:"item-price-title",children:"Cena"})]}),pe,Object(x.jsxs)("li",{className:"item-card summary ",children:[Object(x.jsx)("span",{className:"item-name"}),Object(x.jsxs)("span",{className:"total",children:["SUMA:  ",Object(x.jsxs)("b",{style:{marginLeft:"5px",color:"white"},children:[ae.toFixed(2)," z\u0142"]}),ae.toFixed(2)<=F?Object(x.jsxs)("b",{children:[" + (",R," z\u0142 dostawa)"]}):Object(x.jsxs)("span",{style:{fontSize:"0.7em",color:"lightgreen"},children:["(powy\u017cej ",F," z\u0142 dostawa gratis)"]})," "]})]}),Object(x.jsx)("li",{className:"item-card__alert",children:Object(x.jsx)("span",{children:!n.valid&&_&&Object(x.jsx)("p",{style:{marginRight:"1em"},children:n.message})})}),ae.toFixed(2)>W&&Object(x.jsxs)("div",{children:[Object(x.jsx)("h3",{children:"Wybierz produkt gratis"}),Object(x.jsx)("div",{className:"bonus",children:je})]})]})}),!$.length>0&&Object(x.jsx)("h3",{style:{color:"white"},children:"Brak produkt\xf3w w koszyku"}),$.length>0&&Object(x.jsx)(f.b,{to:"/zamowienie",children:Object(x.jsx)(u.a,{disabled:!n.valid,children:"Przejd\u017a do zam\xf3wienia"})}),!$.length>0&&Object(x.jsx)(f.b,{to:"/",children:Object(x.jsx)(u.a,{children:"Przejd\u017a do sklepu"})})]})]})}},97:function(e,t,n){},98:function(e,t,n){"use strict";var a=n(6);n(42);function r(e,t,n,a,r,c,s){try{var i=e[c](s),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(a,r)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(a,c){var s=e.apply(t,n);function i(e){r(s,a,c,i,o,"next",e)}function o(e){r(s,a,c,i,o,"throw",e)}i(void 0)}))}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=!1,i=null,o="en",u=null,l=null,d="https://maps.googleapis.com/maps/api/geocode/json";function p(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];s&&(t?console.warn(e):console.log(e))}function j(e){return m.apply(this,arguments)}function m(){return(m=c(a.mark((function e(t){var n,r;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t).catch((function(){return Promise.reject(new Error("Error fetching data"))}));case 2:return n=e.sent,e.next=5,n.json().catch((function(){return p("Error parsing server response"),Promise.reject(new Error("Error parsing server response"))}));case 5:if("OK"!==(r=e.sent).status){e.next=9;break}return p(r),e.abrupt("return",r);case 9:return p("".concat(r.error_message,".\nServer returned status code ").concat(r.status),!0),e.abrupt("return",Promise.reject(new Error("".concat(r.error_message,".\nServer returned status code ").concat(r.status))));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var b={setApiKey:function(e){i=e},setLanguage:function(e){o=e},setRegion:function(e){u=e},setLocationType:function(e){l=e},enableDebug:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];s=e},fromLatLng:function(e,t,n,r,s,m){return c(a.mark((function c(){var b,f;return a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e&&t){a.next=3;break}return p("Provided coordinates are invalid",!0),a.abrupt("return",Promise.reject(new Error("Provided coordinates are invalid")));case 3:return b="".concat(e,",").concat(t),f="".concat(d,"?latlng=").concat(encodeURIComponent(b)),(n||i)&&(f+="&key=".concat(i=n||i)),(r||o)&&(f+="&language=".concat(o=r||o)),(s||u)&&(u=s||u,f+="&region=".concat(encodeURIComponent(u))),(m||l)&&(l=m||l,f+="&location_type=".concat(encodeURIComponent(l))),a.abrupt("return",j(f));case 9:case"end":return a.stop()}}),c)})))()},fromAddress:function(e,t,n,r){return c(a.mark((function c(){var s;return a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e){a.next=3;break}return p("Provided address is invalid",!0),a.abrupt("return",Promise.reject(new Error("Provided address is invalid")));case 3:return s="".concat(d,"?address=").concat(encodeURIComponent(e)),(t||i)&&(s+="&key=".concat(i=t||i)),(n||o)&&(s+="&language=".concat(o=n||o)),(r||u)&&(u=r||u,s+="&region=".concat(encodeURIComponent(u))),a.abrupt("return",j(s));case 8:case"end":return a.stop()}}),c)})))()}};t.default=b}}]);
//# sourceMappingURL=5.edc317d2.chunk.js.map